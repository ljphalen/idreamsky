{"version":3,"sources":["webpack:///src/page/setting/targetingmanage.vue","webpack:///./src/page/setting/targetingmanage.vue?1452","webpack:///./src/page/setting/targetingmanage.vue"],"names":["targetingmanage","getTargetList","get_account_action","account_id","pageId","done","item","targeting_name","description","targeting","targeting_id","target","address","this","$axios","get","params","then","response","data","msg","catch","err","filtering","currentChange","list","page_info","setting_targetingmanage","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","maxlength","clearable","nativeOn","keyup","$event","_k","keyCode","key","model","value","callback","$$v","expression","_v","type","on","click","newTarget","staticStyle","width","targetData","prop","label","sortable","fixed","scopedSlots","_u","fn","scope","size","editTarget","row","delTarget","$index","background","layout","total","pagination","total_number","current-change","changePage","title","dialogTitle","visible","dialogVisible","modal","before-close","handleClose","update:visible","change","changeTarget","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.7e3bc07694b202eac437.js","sourcesContent":["<style>\r\n  .el-dialog__header {\r\n    font-weight: bold;\r\n    border-bottom: 1px solid #f1f1f1;\r\n    /* background-color: #f1f1f1; */\r\n  }\r\n\r\n</style>\r\n<template>\r\n  <div class=\"template-container\">\r\n    <div class=\"template-item-wrap\">\r\n      <div class=\"temp-item-inlineblock\">\r\n        <el-input placeholder=\"定向名称\" v-model='filtering' :maxlength=\"120\" @keyup.enter.native=\"getTargetList()\" clearable></el-input>\r\n      </div>\r\n      <div class=\"temp-item-inlineblock\">\r\n        <el-button type=\"primary\" @click=\"getTargetList()\">查询</el-button>\r\n      </div>\r\n      <div class=\"temp-item-inlineblock temp-item-right\">\r\n        <el-button type=\"primary\" @click=\"newTarget()\">新建定向</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"table-wrap\">\r\n      <el-table :data=\"targetData\" style=\"width: 100%\">\r\n        <el-table-column prop=\"targeting_name\" label=\"定向名称\" sortable width=\"200\"> </el-table-column>\r\n        <el-table-column prop=\"description\" label=\"定向描述\" > </el-table-column>\r\n        <el-table-column prop=\"last_modified_time\" label=\"最后更新时间\" width=\"200\"> </el-table-column>\r\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"editTarget(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\r\n            <el-button @click=\"delTarget(scope.row,scope.$index)\" type=\"text\" size=\"small\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-pagination background layout=\"prev, pager, next\" :total=\"pagination.total_number\" @current-change=\"changePage\"> </el-pagination>\r\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"50%\" :modal=\"false\" :before-close=\"handleClose\">\r\n      <v-target :target=\"target\" @change=\"changeTarget\"></v-target>\r\n    </el-dialog>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import vTarget from '../../components/vTarget'\r\n  export default {\r\n    components: {\r\n      'v-target': vTarget\r\n    },\r\n    created: function () {\r\n      if (this.account_id) {\r\n        this.getTargetList()\r\n      }\r\n    },\r\n    watch: {\r\n      // 监听 account_id 发生变化\r\n      account_id() {\r\n        this.getTargetList()\r\n      }\r\n    },\r\n    computed: {\r\n      account_id() {\r\n        var account = this.$store.getters.get_account_action\r\n        return account.account_id\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        currentChange: 1,\r\n        dialogTitle: '创建新定向包',\r\n        dialogVisible: false,\r\n        targeting_id: '',\r\n        filtering: '',\r\n        targetData: [],\r\n        pagination: [],\r\n        target: {}\r\n      }\r\n    },\r\n    methods: {\r\n      changePage(pageId) {\r\n        this.currentChange = pageId\r\n        this.getTargetList()\r\n      },\r\n      handleClose(done) {\r\n        // this.$confirm('确认关闭？').then(_ => {\r\n        done()\r\n        // }).catch(_ => {});\r\n      },\r\n      newTarget() {\r\n        this.target = {\r\n          targeting_id: 0,\r\n          targeting_name: '',\r\n          description: '',\r\n          targeting: {}\r\n        }\r\n        this.dialogVisible = true\r\n      },\r\n      editTarget(item) {\r\n        this.dialogTitle = '编辑定向包'\r\n        this.target = item\r\n        this.dialogVisible = true\r\n      },\r\n      changeTarget(item) {\r\n        if (item) {\r\n          // console.log('changeTarget', item)\r\n          this.target.targeting_name = item.targeting_name\r\n          this.target.description = item.description\r\n          this.target.targeting = item.targeting\r\n\r\n          if (this.target.targeting_id == 0) {\r\n            this.target.targeting_id = item.targeting_id\r\n            this.targetData.unshift(this.target)\r\n          }\r\n          // this.target = item\r\n        }\r\n        this.dialogVisible = false\r\n      },\r\n      formatter(row, column) {\r\n        return row.address\r\n      },\r\n\r\n      delTarget(target, index) {\r\n        var that = this\r\n        var params = {\r\n          targeting_id: target.targeting_id\r\n        }\r\n        params.account_id = this.account_id\r\n        this.$axios\r\n          .get('/Admin/Marketing_Targetings/delete', {\r\n            params: params\r\n          })\r\n          .then(function (response) {\r\n            var respData = response.data\r\n            if (respData.code == 0) {\r\n              console.log('delete')\r\n              that.targetData.splice(index, 1)\r\n            } else {\r\n              that.$message(respData.msg)\r\n            }\r\n          })\r\n          .catch(function (err) {\r\n            that.$message('网络繁忙，请稍后再试！')\r\n            console.log(err)\r\n          })\r\n      },\r\n      getTargetList() {\r\n        var that = this\r\n        var params = {}\r\n        if (this.targeting_id > 0) {\r\n          params['targeting_id'] = this.targeting_id\r\n        }\r\n        if (this.filtering != '') {\r\n          params['filtering'] = this.filtering\r\n        }\r\n        if (this.currentChange > 1) {\r\n          params['page'] = this.currentChange\r\n        }\r\n        params.account_id = this.account_id\r\n        this.$axios\r\n          .get('/Admin/Marketing_Targetings/get', {\r\n            params: params\r\n          })\r\n          .then(function (response) {\r\n            var respData = response.data\r\n            if (respData.code == 0) {\r\n              that.targetData = respData.data.list\r\n              that.pagination = respData.data.page_info\r\n            } else {\r\n              that.$message(respData.msg)\r\n            }\r\n          })\r\n          .catch(function (err) {\r\n            that.$message('网络繁忙，请稍后再试！')\r\n            console.log(err)\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/setting/targetingmanage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"template-container\"},[_c('div',{staticClass:\"template-item-wrap\"},[_c('div',{staticClass:\"temp-item-inlineblock\"},[_c('el-input',{attrs:{\"placeholder\":\"定向名称\",\"maxlength\":120,\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.getTargetList()}},model:{value:(_vm.filtering),callback:function ($$v) {_vm.filtering=$$v},expression:\"filtering\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"temp-item-inlineblock\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.getTargetList()}}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"temp-item-inlineblock temp-item-right\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.newTarget()}}},[_vm._v(\"新建定向\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"table-wrap\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.targetData}},[_c('el-table-column',{attrs:{\"prop\":\"targeting_name\",\"label\":\"定向名称\",\"sortable\":\"\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"定向描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"last_modified_time\",\"label\":\"最后更新时间\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.editTarget(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.delTarget(scope.row,scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.pagination.total_number},on:{\"current-change\":_vm.changePage}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogVisible,\"width\":\"50%\",\"modal\":false,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('v-target',{attrs:{\"target\":_vm.target},on:{\"change\":_vm.changeTarget}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c908349\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/setting/targetingmanage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c908349\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./targetingmanage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./targetingmanage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./targetingmanage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c908349\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./targetingmanage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/setting/targetingmanage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
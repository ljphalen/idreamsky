webpackJsonp([12],{DFuy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),l={created:function(){this.getEnumList(),this.account_id&&this.getList()},watch:{account_id:function(){this.getList()},options_list:function(){this.optionsChange()}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id},options_list:function(){return i()(this.optionsValue)}},data:function(){return{audience_used:0,audience_usable:50,tableData:[],tableDataConfig:[],audience_type_list:{},audience_status_list:{},loading:!1,newAudienceVisible:!1,optionsValue:{type:[],status:[],source:[],name:""},options:{type:[{value:"私有人群",label:"私有人群"},{value:"拓展人群",label:"拓展人群"},{value:"组合人群",label:"组合人群"}],status:[{value:"PENDING",label:"待处理"},{value:"PROCESSING",label:"处理中"},{value:"SUCCESS",label:"可用"},{value:"ERROR",label:"错误"}],source:[{value:"CUSTOMER_FILE",label:"号码文件"},{value:"AD",label:"广告受众"},{value:"USER_ACTION",label:"用户行为"},{value:"LBS",label:"地理位置"},{value:"KEYWORD",label:"关键词"},{value:"COMBINE",label:"交并差组合"},{value:"LOOKALIKE",label:"智能拓展"}]},multipleSelection:[]}},methods:{newAudience:function(t){console.log(t),this.$router.push("/setting/audience/"+t)},optionsChange:function(){this.tableData=[];for(var t in this.tableDataConfig)0!=this.optionsValue.type.length&&-1==this.optionsValue.type.indexOf(this.audience_type_list[this.tableDataConfig[t].type].parent_name)||0!=this.optionsValue.status.length&&-1==this.optionsValue.status.indexOf(this.tableDataConfig[t].status)||0!=this.optionsValue.source.length&&-1==this.optionsValue.source.indexOf(this.tableDataConfig[t].type)||null!==this.tableDataConfig[t].label.match(this.optionsValue.name)&&this.tableData.push(this.tableDataConfig[t])},getList:function(){this.loading=!0;var t={};t.account_id=this.account_id;var e=this;this.$axios.get("/Admin/Marketing_CustomAudiences/get",{params:t}).then(function(t){var a=t.data;0==a.code?(e.tableData=e.tableDataConfig=a.data,e.audience_used=a.data.length,e.audience_usable=50-e.audience_used,e.optionsChange(),e.loading=!1):(e.loading=!1,e.$message(a.msg))}).catch(function(t){e.loading=!1,e.$message("网络繁忙，请稍后再试！"),console.log(t)})},sortTypeChange:function(t,e){return t.type>e.type},sortStatusChange:function(t,e){return t.status>e.status},unitConversion:function(t,e){var a=t[e.property];return a=(a+"").replace(/(?=(?!(\b))(\d{3})+$)/g,",")},getEnumList:function(){var t=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(e){var a=e.data;0==a.code&&(t.audience_type_list=a.data.AUDIENCE_TYPE,t.audience_status_list=a.data.AUDIENCE_STATUS)}).catch(function(t){console.log(t)})},handleSelectionChange:function(t){this.multipleSelection=t},handleListRefresh:function(){this.getList()},handleListRemove:function(){var t=this,e=this.multipleSelection;if(e&&e.length>0)if(1==e.length){var a=[];for(var s in e)a.push(e[s].id);this.$confirm("确认删除记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={ids:a};t.audiencesBatchDelete(e)}).catch(function(){})}else t.$message("不支持批量操作");else t.$message("请选择需要删除的记录")},audiencesBatchDelete:function(t){var e=this;t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_CustomAudiences/batchDelete",{params:t}).then(function(t){var a=t.data;0==a.code?(e.$message({type:"success",message:a.msg}),setTimeout(function(){e.getList()},500)):e.$message.error(a.msg)}).catch(function(t){e.$message("网络繁忙，请稍后再试！")})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-container"},[a("div",{staticClass:"template-item-wrap"},[a("div",{staticClass:"temp-item-inlineblock temp-item-right"},[a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择类型"},model:{value:t.optionsValue.type,callback:function(e){t.$set(t.optionsValue,"type",e)},expression:"optionsValue.type"}},t._l(t.options.type,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择状态"},model:{value:t.optionsValue.status,callback:function(e){t.$set(t.optionsValue,"status",e)},expression:"optionsValue.status"}},t._l(t.options.status,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择来源"},model:{value:t.optionsValue.source,callback:function(e){t.$set(t.optionsValue,"source",e)},expression:"optionsValue.source"}},t._l(t.options.source,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock temp-item-right"},[a("el-input",{attrs:{clearable:"",placeholder:"人群名称"},model:{value:t.optionsValue.name,callback:function(e){t.$set(t.optionsValue,"name",e)},expression:"optionsValue.name"}})],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock temp-item-left"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.newAudienceVisible=!0}}},[a("i",{staticClass:"el-icon-plus"}),t._v("创建人群")])],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock temp-item-left"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleListRemove}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock temp-item-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleListRefresh}},[t._v("刷新")])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"created_time",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label",label:"名称",sortable:""}}),t._v(" "),a("el-table-column",{key:"type",attrs:{label:"类型","sort-method":t.sortTypeChange,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.audience_type_list[e.row.type].name)+"\n          "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"11px",color:"#909599"}},[t._v(t._s(t.audience_type_list[e.row.type].parent_name))])]}}])}),t._v(" "),a("el-table-column",{key:"status",attrs:{label:"状态","sort-method":t.sortStatusChange,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return["SUCCESS"==e.row.status?a("span",[a("span",{staticStyle:{color:"#4caf50"}},[t._v("●")]),t._v("\n              "+t._s(t.audience_status_list[e.row.status].name)+"\n              "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"11px",color:"#909599"}},[t._v("上次更新："+t._s(e.row.last_modified_time))])]):"ERROR"==e.row.status?a("span",[a("span",{staticStyle:{color:"#ff5a5f"}},[t._v("●")]),t._v("\n              "+t._s(t.audience_status_list[e.row.status].name)+"\n              "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"11px",color:"#909599"}},[t._v("文件人群创建错误")])]):a("span",[a("span",{staticStyle:{color:"#ffbe00"}},[t._v("●")]),t._v("\n              "+t._s(t.audience_status_list[e.row.status].name)+"\n              "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"11px",color:"#909599"}},[t._v("正在创建人群")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user_count",label:"可用人数",sortable:"",formatter:t.unitConversion}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"创建时间",sortable:""}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"创建人群",visible:t.newAudienceVisible,width:"830px",modal:!1,center:""},on:{"update:visible":function(e){t.newAudienceVisible=e}}},[a("div",{staticClass:"modal-header"},[a("p",[t._v("已用人群配额/可用人群配额："+t._s(t.audience_used)+"/50 \n      "),a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("人群配额为当前账户可用于创建人群的个数，配额已满时")]),t._v(" "),a("p",[t._v("不支持创建新的人群，删除多余的人群可空出配额")]),t._v(" "),a("br"),t._v(" "),a("hr"),t._v(" "),a("br"),t._v(" "),a("p",[t._v("人群配额：共50个")]),t._v(" "),a("p",[t._v("已用人群配额：共"+t._s(t.audience_used)+"个")]),t._v(" "),a("p",[t._v("可用人群配额：共"+t._s(t.audience_usable)+"个")])]),t._v(" "),a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-question"})])],1)],1)]),t._v(" "),a("div",{staticClass:"field-list"},[a("div",[a("div",{staticClass:"field-tit"},[t._v("\n        私有人群 \n        "),a("el-tooltip",{attrs:{placement:"right",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("智能拓展")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br"),t._v(" "),a("span",[t._v("组合")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"39px"}}),t._v(" 支持"),a("br"),t._v(" "),a("span",[t._v("广告投放")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br"),t._v(" "),a("span",[t._v("洞察分析")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br"),t._v(" "),a("span",[t._v("共享人群")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br")]),t._v(" "),a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-info"})])],1)],1),t._v(" "),a("div",{staticClass:"field-content"},[a("div",{staticClass:"media-group"},[a("a",{on:{click:function(e){t.newAudience("file")}}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("button",{staticClass:"btn btn-app btn-file"},[a("span",{staticClass:"spaui-icon lg icons-lg-file"})])]),t._v(" "),a("div",{staticClass:"media-body"},[a("h4",{staticClass:"media-heading"},[t._v("号码文件")]),t._v(" "),a("p",[t._v("通过文件上传来创建人群")])])])])]),t._v(" "),a("div",{staticClass:"media-group"},[a("a",{on:{click:function(e){t.newAudience("ad")}}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("button",{staticClass:"btn btn-app btn-file",staticStyle:{"background-color":"#3ecbd7"}},[a("span",{staticClass:"spaui-icon lg icons-lg-file",staticStyle:{"background-position":"-168px -488px"}})])]),t._v(" "),a("div",{staticClass:"media-body"},[a("h4",{staticClass:"media-heading"},[t._v("广告受众")]),t._v(" "),a("p",[t._v("通过历史广告曝光/点击创建人群")])])])])])])])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"field-list"},[a("div",[a("div",{staticClass:"field-tit"},[t._v("\n        拓展人群 \n        "),a("el-tooltip",{attrs:{placement:"right",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("广告投放")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br"),t._v(" "),a("span",[t._v("共享人群")]),a("i",{staticClass:"el-icon-check",staticStyle:{color:"green","padding-left":"15px"}}),t._v(" 支持"),a("br")]),t._v(" "),a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-info"})])],1)],1),t._v(" "),a("div",{staticClass:"field-content"},[a("div",{staticClass:"media-group"},[a("a",{on:{click:function(e){t.newAudience("lookalike")}}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("button",{staticClass:"btn btn-app btn-file",staticStyle:{"background-color":"#4d4e82"}},[a("span",{staticClass:"spaui-icon lg icons-lg-file",staticStyle:{"background-position":"-510px -112px"}})])]),t._v(" "),a("div",{staticClass:"media-body"},[a("h4",{staticClass:"media-heading"},[t._v("智能拓展")]),t._v(" "),a("p",[t._v("根据人群特征智能计算出更多相似的新人群")])])])])])])])])])],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(t){a("VGc5")},"data-v-e296d62c",null);e.default=o.exports},VGc5:function(t,e){}});
//# sourceMappingURL=12.13bf7f7b31e3a754ea6b.js.map
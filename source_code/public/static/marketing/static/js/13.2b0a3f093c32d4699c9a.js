webpackJsonp([13],{"18/i":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("wZit"),s={created:function(){this.getMarketing_Account()},data:function(){return{form:{account_name:"",qq:"",state:""},stateList:[{value:"",label:"所有状态"},{value:"ON",label:"开启"},{value:"OFF",label:"关闭"}],tableData:[]}},methods:{newAccount:function(){this.$router.push("/setting/accountmanage/new")},handleEditClick:function(t){this.$router.push("/setting/accountmanage/edit/"+t)},handleListStatusChange:function(t){var e=t.state;"OFF"===t.state?t.state="ON":t.state="OFF";var a={id:t.id,state:t.state};this.handleListStatusChangeRequest(t,a,e)},handleListStatusChangeRequest:function(t,e,a){var s=this;e.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Account/changeState",{params:e}).then(function(e){var l=e.data;0==l.code?n.a.$emit("updataAccounts"):(t.state=a,s.$message(l.msg))}).catch(function(e){t.state=a,s.$message("网络繁忙，请稍后再试！"),console.log(e)})},getMarketing_Account:function(){var t=this;this.form.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Account/get",{params:this.form}).then(function(e){var a=e.data;0==a.code?t.tableData=a.data:t.$message(a.msg)}).catch(function(e){t.$message("网络繁忙，请稍后再试！"),console.log(e)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-container"},[a("div",{staticClass:"template-item-wrap"},[a("div",{staticClass:"temp-item-inlineblock"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.stateList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("el-input",{attrs:{placeholder:"账号名",clearable:""},model:{value:t.form.account_name,callback:function(e){t.$set(t.form,"account_name",e)},expression:"form.account_name"}})],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("el-input",{attrs:{placeholder:"QQ",clearable:""},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("el-button",{attrs:{type:"primary"},on:{click:t.getMarketing_Account}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"temp-item-inlineblock temp-item-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.newAccount}},[t._v("新建账号")])],1)]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"account_name",label:"账号名称",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qq",label:"QQ",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account_id",label:"广点通账户ID",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"grant_type",label:"授权状态",sortable:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(" "+t._s(e.row.message))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t._v("\n              "+t._s(e.row.grant_type)+"\n              "),a("i",{staticClass:"el-icon-question"})])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"OFF",label:"账号状态",sortable:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#999"},on:{change:function(a){t.handleListStatusChange(e.row)}},model:{value:"ON"===e.row.state,callback:function(a){t.$set(e.row,"state === 'ON' ? true : false",a)},expression:"scope.row.state === 'ON' ? true : false"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleEditClick(e.row.id)}}},[t._v("编辑")]),t._v(" "),"待授权"==e.row.grant_type?a("span",[a("a",{staticClass:"target-href",attrs:{href:e.row.grant_url,target:"_blank"}},[t._v("授权")])]):a("span",[a("a",{staticClass:"target-href",attrs:{href:e.row.grant_url,target:"_blank"}},[t._v("重新授权")])])]}}])})],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(t){a("LCjE")},"data-v-9563f8cc",null);e.default=o.exports},LCjE:function(t,e){}});
//# sourceMappingURL=13.2b0a3f093c32d4699c9a.js.map
webpackJsonp([21],{QTsG:function(e,t){},k2ZH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),r=i("pFYg"),n=i.n(r),o={created:function(){this.getAdCommongetEnum();var e,t=new RegExp("(^| )PHPSESSID=([^;]*)(;|$)");if((e=document.cookie.match(t))&&(this.uploadHeaders={"VUE-SESSID":unescape(e[2])}),this.account_id){var i=this.$route.params||{};i.hasOwnProperty("id")&&(this.getAdcreatives(i.id),this.adcreativeId=i.id)}},watch:{account_id:function(){this.getAdCampaigns(this.adCampaignsParams);var e=this.$route.params||{};e.hasOwnProperty("id")&&(this.getAdcreatives(e.id),this.adcreativeId=e.id)}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id}},data:function(){return{submitLoading:!1,adcreativeId:0,activeAdcreative:{},loadingCampaign:!1,loading:!1,productList:[],productTypeList:[],productShow:!1,destinationUrlShow:!1,uploadlimit:1,upadlodData:{account_id:10},uploadHeaders:{},uploadList:[{previewImgUrl:"",fileList:[{name:"",url:""}]}],ADCREATIVE_STYLE_list:{},adcreativeList:[],activeAdcreativeList:!1,Adcreativeinfo:{product_type:"",site_set:""},adCampaignsList:[],site_setList:{},form:{campaign_id:"",product_refs_id:"",product_type:"",destination_url:"",site_set:"",adcreative_template_id:"",adcreative_elements:[]},adCampaignsParams:{page:1,page_size:100,campaign_id:"",configured_status:"",campaign_name:"",start_date:"",end_date:""},adcreativeTemplateInfo_row:{adcreative_sample_image:{}},tableDropdown:"下拉菜单",tabActiveName:"0",tabActiveList:[],tabList:[{label:"创意1",name:"0",adcreative_name:"",elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}}]}},methods:{getAdcreatives:function(e){var t=this,i={adcreative_id:e,account_id:t.account_id};this.$axios.get("/Admin/Marketing_Adcreatives/get",{params:i}).then(function(e){var i=e.data;if(0==i.code){var a=i.data.list[0];t.activeAdcreative=i.data.list[0];var s={campaign_id:a.campaign_id,site_set:a.site_set[0],product_refs_id:a.product_refs_id,product_type:a.product_type,product_type_name:a.product_type_name,destination_url:a.destination_url,adcreative_template_id:a.adcreative_template_id,adcreative_elements:[]};t.form=s,t.Adcreativeinfo.product_type=a.product_type,t.Adcreativeinfo.site_set=a.site_set[0],t.adCampaignsParams.campaign_id=a.campaign_id,t.getAdCampaigns(t.adCampaignsParams)}else t.$message(i.msg)}).catch(function(e){t.$message("网络繁忙，请稍后再试！"),console.log(e)})},remoteCampaign:function(e){var t=this;this.loadingCampaign=!0,setTimeout(function(){t.adCampaignsParams.campaign_name=e,t.getAdCampaigns(t.adCampaignsParams)},300)},uploadFileLiclick:function(e,t){this.tabActiveList={index:e,type:t}},uploadfileChange:function(e,t,i,a){var s,r,n,o,l=this,d=(e.target||e.currentTarget).files[0];if("image"==a){var c=l.tabList[i].elementsData.imageList[t].restriction;s=c.image_restriction.height,r=c.image_restriction.width,n=c.image_restriction.file_size,o=c.image_restriction.file_format}else if("video"==a){c=l.tabList[i].elementsData.videoList[t].restriction;s=c.video_restriction.min_height||c.video_restriction.height,r=c.video_restriction.min_width||c.video_restriction.width,n=c.video_restriction.file_size,o=c.video_restriction.file_format}if(!d)return!1;if(d.size/1024>n)return this.$message("上传文件不能超过"+n+"kb"),!1;if(!this.formatCheck(o,d.type,a))return this.$message("上传文件格式不正确"),!1;if("image"==a)(m=new FileReader).onload=function(e){var n=e.target.result,o=new Image;o.onload=function(){var e=o.width,n=o.height;r==e&&s==n?l.uploadFileAction(d,t,i,a):l.$message("上传文件尺寸不正确")},o.src=n},m.readAsDataURL(d);else if("video"==a){var m=new FileReader;d.type;m.onload=function(e){var n=e.target.result,o=document.createElement("video");document.body.appendChild(o),o.addEventListener("loadedmetadata",function(e){o.videoWidth==r&&o.videoHeight==s?l.uploadFileAction(d,t,i,a):l.$message("上传文件尺寸不正确"),o.remove()}),o.setAttribute("src",n)},m.readAsDataURL(d)}},uploadFileAction:function(e,t,i,a){var s,r=this,n="";"image"==a?(n="/Admin/Marketing_Images/add",s=r.tabList[i].elementsData.imageList[t]):"video"==a&&(n="/Admin/Marketing_Videos/add",s=r.tabList[i].elementsData.videoList[t]);var o=new FormData;o.append("account_id",r.account_id),o.append("file",e),"video"==a&&o.append("description",e);var l=new XMLHttpRequest;l.upload.addEventListener("progress",function(e){e.lengthComputable?(s.progressbar.percentage=60,Math.round(100*e.loaded/e.total),s.progressbar.status="success"):complete&&(s.progressbar.status="success")},!1),l.addEventListener("load",function(e){},!1),l.addEventListener("error",function(e){s.progressbar.status="exception",console.log(e)},!1),l.addEventListener("abort",function(){console.log(evt)},!1),l.open("POST",n),l.setRequestHeader("VUE-SESSID",this.uploadHeaders["VUE-SESSID"]),l.send(o),l.onreadystatechange=function(){if(4==l.readyState)if(200==l.status){var e=JSON.parse(l.response);0==e.code?(s.progressbar.percentage=100,s.progressbar.status="success",s.preview_url=e.data.preview_url,s.preview_url_id="video"==a?e.data.video_id:e.data.image_id):(r.$message(e.msg),s.progressbar.status="exception")}else s.progressbar.status="exception"}},uploadImgchange:function(e,t){},beforeUpload:function(e){var t=this,i=parseInt(this.tabActiveName);if(this.tabActiveList&&"image"==this.tabActiveList.type){var a=this.tabList[i].elementsData.imageList[this.tabActiveList.index].restriction,s=a.image_restriction.file_size,r=a.image_restriction.file_format,n=a.image_restriction.height,o=a.image_restriction.width;if(e.size/1024>s)return this.$message("上传文件不能超过"+s+"kb"),!1;if(!this.formatCheck(r,e.type))return this.$message("上传文件格式不正确"),!1;var l=new FileReader;return l.onload=function(e){var i=e.target.result,a=new Image;a.onload=function(){var e=a.width,i=a.height;return o==e&&n==i||(t.$message("上传文件尺寸不正确"),!1)},a.src=i},l.readAsDataURL(e),!0}},formatCheck:function(e,t,i){var a="";for(var s in e)if("image"==i){a=a+("jpg"==this.imageTypeClassify(e[s])?"jpg|jpeg":this.imageTypeClassify(e[s]))+"|"}else a=a+this.videoTypeClassify(e[s])+"|";return a=a.substring(0,a.length-1),new RegExp("/("+a+")$").test(t)},uploadFile:function(e){console.log("服务器回调事件:",e),console.log("file.response",e.response)},cloneObj:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,i=e.constructor===Array?[]:{};if("object"===(void 0===e?"undefined":n()(e))){if(window.JSON)t=s()(e),i=JSON.parse(t);else for(var a in e)i[a]="object"===n()(e[a])?cloneObj(e[a]):e[a];return i}}),handleTbaClick:function(e,t){if("add"==e.name&&this.activeAdcreativeList){var i=this.cloneObj(this.tabList[e.index].elementsData);this.tabList.splice(e.index,0,{label:"创意"+(parseInt(e.index)+1),name:e.index,adcreative_name:"",elementsData:i}),this.tabActiveName=e.index}else"add"==e.name&&(this.$message("请选择创意规格"),this.tabActiveName="0")},formatterCrtstyle:function(e,t,i){return e.adcreative_template_size+e.adcreative_template_style},handleCurrentChange:function(e,t){console.log("currentRow:",e),this.adcreativeTemplateInfo_row={adcreative_sample_image:{}},this.form.adcreative_template_id=e.adcreative_template_id,this.adcreativeTemplateInfo_row=e,this.activeAdcreativeList=!0,this.uploadElementFiltrate()},defaultCreativity:function(){this.tabActiveName="0",this.tabList=[{label:"创意1",name:"0",adcreative_name:"",elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}}]},imageTypeClassify:function(e){var t="";return"IMAGE_TYPE_GIF"==e?t="gif":"IMAGE_TYPE_JPG"==e?t="jpg":"IMAGE_TYPE_PNG"==e?t="png":"IMAGE_TYPE_SWF"==e&&(t="swf"),t},videoTypeClassify:function(e){var t="";return"MEDIA_TYPE_MP4"==e?t="mp4":"MEDIA_TYPE_AVI"==e?t="avi":"MEDIA_TYPE_MOV"==e?t="mov":"MEDIA_TYPE_FLV"==e&&(t="flv"),t},uploadElementFiltrate:function(){var e=this.adcreativeTemplateInfo_row,t=this.cloneObj(e.adcreative_elements),i={imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]};for(var a in t){var s=t[a];if("ELEMENT_TYPE_IMAGE"==s.element_type){var r="",n=s.restriction.image_restriction.file_format;for(var o in n){r=r+this.imageTypeClassify(n[o])+"/"}r=r.substring(0,r.length-1),s.restriction.image_restriction.file_format_text=r,s.progressbar={status:"",percentage:0},s.preview_url="",s.preview_url_id="",i.imageList.push(s)}else if("ELEMENT_TYPE_TEXT"==s.element_type)s.txtvalue="",i.textList.push(s);else if("ELEMENT_TYPE_VIDEO"==s.element_type){r="",n=s.restriction.video_restriction.file_format;for(var o in n){r=r+this.videoTypeClassify(n[o])+"/"}r=r.substring(0,r.length-1),s.restriction.video_restriction.file_format_text=r,s.progressbar={status:"",percentage:0},s.preview_url="",s.preview_url_id="",i.videoList.push(s)}else"ELEMENT_TYPE_URL"==s.element_type?(s.url="",i.urlList.push(s)):"ELEMENT_TYPE_ENUM"==s.element_type?(s.description="请选择"+s.description,s.enumvalue="",i.enumList.push(s)):"ELEMENT_TYPE_CANVAS"==s.element_type?i.canvasList.push(s):"ELEMENT_TYPE_REFERENCE"==s.element_type&&i.referenceList.push(s)}this.tabList[0].elementsData=this.cloneObj(i),this.tabList[0].adcreative_name=this.activeAdcreative.adcreative_name,this.setTabListelementsData(this.tabList[0].elementsData,this.activeAdcreative)},setTabListelementsData:function(e,t){var i=t.adcreative_elements;for(var a in e)if(e[a].length>0)for(var s in e[a]){var r=e[a][s].name;"ELEMENT_TYPE_IMAGE"==e[a][s].element_type||"ELEMENT_TYPE_VIDEO"==e[a][s].element_type?(e[a][s].preview_url_id=i[r],e[a][s].preview_url=i[r+"_url"]):"ELEMENT_TYPE_URL"==e[a][s].element_type?e[a][s].url=i[r]:"ELEMENT_TYPE_ENUM"==e[a][s].element_type?e[a][s].enumList=i[r]:"ELEMENT_TYPE_TEXT"==e[a][s].element_type&&(e[a][s].txtvalue=i[r])}this.tabList[0].elementsData=this.cloneObj(e),this.tabList[0].adcreative_id=this.adcreativeId},tableHeaderRender:function(e,t){t.column;var i=this.$createElement;return i("el-dropdown",null,[i("span",{class:"el-dropdown-link"},["下拉菜单",i("i",{class:"el-icon-arrow-down el-icon--right"},[])]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",null,["视频"]),i("el-dropdown-item",null,["多图轮播"]),i("el-dropdown-item",null,["单图(文)"]),i("el-dropdown-item",null,["多图(文)"]),i("el-dropdown-item",null,["随心互动"]),i("el-dropdown-item",null,["文字链"]),i("el-dropdown-item",null,["微动"])])])},campaignChange:function(e){var t;t=this.adCampaignsList.find(function(t){return t.campaign_id===e}),this.form.product_type=t.product_type,1===this.productTypeList[t.product_type].product_refs_id?(this.productShow=!0,this.destinationUrlShow=!1,this.getProducts({product_type:t.product_type})):(this.productShow=!1,this.form.destination_url="",this.destinationUrlShow=!0,this.form.product_refs_id=""),this.Adcreativeinfo.product_type=t.product_type,this.Adcreativeinfo.site_set&&this.Adcreativeinfo.product_type&&this.getAdcreativetemplateinfo()},productChange:function(e){var t;t=this.productList.find(function(t){return t.product_refs_id===e}),this.form.destination_url=t.product_url},siteSetListChange:function(e){this.Adcreativeinfo.site_set=e,this.Adcreativeinfo.site_set&&this.Adcreativeinfo.product_type&&this.getAdcreativetemplateinfo()},getAdcreativetemplateinfo:function(){var e=this;this.loading=!0;var t=e.Adcreativeinfo;t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Adcreativetemplateinfo/get",{params:t}).then(function(t){var i=t.data;if(0==i.code){var a=[];for(var s in i.data.list)if(i.data.list[s].adcreative_template_id==e.form.adcreative_template_id){a.push(i.data.list[s]);break}e.adcreativeList=a,e.$refs.adcreativeTable.setCurrentRow(a[0])}else e.$message(i.msg);e.loading=!1}).catch(function(t){e.loading=!1,e.$message("网络繁忙，请稍后再试！"),console.log(t)})},onCancel:function(){this.$router.push("/advertising/adCreative")},onSubmit:function(){var e=this.form,t=this,i=this.tabList;if(!e.campaign_id)return t.$message("请选择推广计划"),!1;if(!e.product_type)return t.$message("请选择推广计划"),!1;if(!e.site_set)return t.$message("请选择投放站点"),!1;if(!this.adcreativeTemplateInfo_row.adcreative_elements)return t.$message("请选择创意规格"),!1;for(var a=!1,s="",r=[],n=0;n<i.length;n++){var o=i[n].elementsData,l=new Object;if(l.adcreative_id=i[n].adcreative_id,l.adcreative_name=i[n].adcreative_name,!i[n].adcreative_name&&i[n].adcreative_name.length>120){a=!0,s=i[n].name+"请填写字数在(1-120)的创意名称";break}for(var d in o)if(o[d].length>0)for(var c in o[d]){var m=o[d][c];if("ELEMENT_TYPE_IMAGE"==m.element_type)m.required&&!m.preview_url&&(a=!0,s="请上传图片"),l[m.name]=m.preview_url_id;else if("ELEMENT_TYPE_VIDEO"==m.element_type)m.required&&!m.preview_url&&(a=!0,s="请上传视频"),l[m.name]=m.preview_url_id;else if("ELEMENT_TYPE_TEXT"==m.element_type)l[m.name]=m.txtvalue,m.required&&!m.txtvalue?(a=!0,s="请填写"+m.description):m.txtvalue&&m.restriction&&m.restriction.text_restriction&&m.restriction.text_restriction.max_length+1<m.txtvalue.length&&(a=!0,s="字符超出"+m.restriction.text_restriction.max_length+"个");else if("ELEMENT_TYPE_URL"==m.element_type){if(l[m.name]=m.url,m.required&&!m.url)a=!0,s=m.description+"不能为空";else if(m.url&&m.restriction&&m.restriction.url_restriction){var _=m.restriction.url_restriction.url_pattern;new RegExp(_).test(m.url)||(a=!0,s=m.description+"格式不正确")}}else"ELEMENT_TYPE_ENUM"==m.element_type&&(l[m.name]=m.enumvalue,m.required&&!m.enumvalue&&(a=!0,s=m.description))}r.push(l)}if(a)return t.$message(s),!1;e.adcreative_elements=r,e.account_id=this.account_id,t.submitLoading=!0,this.$axios.get("/Admin/Marketing_Adcreatives/update",{params:e}).then(function(e){var i=e.data;t.submitLoading=!1,0==i.code?(t.$message({type:"success",message:i.msg}),setTimeout(function(){t.$router.push("/advertising/adCreative")},500)):t.$message.error(i.msg)}).catch(function(e){t.$message("网络繁忙，请稍后再试！"),t.submitLoading=!1,console.log(e)})},getAdCommongetEnum:function(){var e=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(t){var i=t.data;0==i.code&&(e.site_setList=i.data.SITE_SET,e.ADCREATIVE_STYLE_list=i.data.ADCREATIVE_STYLE,e.productTypeList=i.data.PRODUCT_TYPE)}).catch(function(e){console.log(e)})},getProducts:function(e){var t=this;e.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Products/list",{params:e}).then(function(e){var i=e.data;0==i.code?t.productList=i.data:t.$message(i.msg)}).catch(function(e){t.$message("网络繁忙，请稍后再试！")})},getAdCampaigns:function(e){var t=this;e.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Campaigns/get",{params:e}).then(function(i){var a=i.data;0==a.code?((a.data.list||a.data.page_info)&&(t.adCampaignsList=a.data.list,t.loadingCampaign=!1),""!=e.campaign_id&&t.campaignChange(e.campaign_id)):(t.$message(a.msg),t.loadingCampaign=!1)}).catch(function(e){t.$message("网络繁忙，请稍后再试！"),t.loadingCampaign=!1})}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"template-container"},[i("div",{staticClass:"template-container-title"},[e._v("编辑广告创意")]),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.form,inline:!0}},[i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("推广计划")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("el-form-item",{attrs:{label:"所属推广计划"}},[i("el-select",{attrs:{disabled:"",filterable:"",remote:"",placeholder:"选择推广计划","remote-method":e.remoteCampaign,loading:e.loadingCampaign},on:{change:e.campaignChange},model:{value:e.form.campaign_id,callback:function(t){e.$set(e.form,"campaign_id",t)},expression:"form.campaign_id"}},e._l(e.adCampaignsList,function(e){return i("el-option",{key:e.campaign_id,attrs:{"data-type":e.product_type,label:e.campaign_name,value:e.campaign_id}})}))],1)],1)]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("站点")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("投放媒体")]),e._v(" "),i("div",{staticClass:"radio-group-inlineblock"},[i("el-radio-group",{on:{change:e.siteSetListChange},model:{value:e.form.site_set,callback:function(t){e.$set(e.form,"site_set",t)},expression:"form.site_set"}},e._l(e.site_setList,function(t,a){return i("el-radio",{key:a,staticClass:"radio-group-item",attrs:{disabled:"",label:a}},[e._v(e._s(t))])}))],1)])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.productShow,expression:"productShow"}],staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("目标详情")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("el-form-item",{attrs:{label:"标的物"}},[i("el-select",{attrs:{disabled:"",filterable:"",placeholder:"选择标的物"},on:{change:e.productChange},model:{value:e.form.product_refs_id,callback:function(t){e.$set(e.form,"product_refs_id",t)},expression:"form.product_refs_id"}},e._l(e.productList,function(e){return i("el-option",{key:e.product_refs_id,attrs:{label:e.product_name,value:e.product_refs_id}})}))],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.destinationUrlShow,expression:"destinationUrlShow"}],staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("落地页")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("el-form-item",{attrs:{label:"落地页url"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.destination_url,expression:"form.destination_url"}],staticClass:"temp-long-inputtext",attrs:{disabled:"",type:"text",value:"",maxlength:"1023"},domProps:{value:e.form.destination_url},on:{input:function(t){t.target.composing||e.$set(e.form,"destination_url",t.target.value)}}})])],1)]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("创意规格")]),e._v(" "),i("div",{staticClass:"temp-item-main",staticStyle:{display:"inline-flex"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"adcreativeTable",staticStyle:{width:"100%"},attrs:{data:e.adcreativeList,"max-height":"556","highlight-current-row":"","default-sort":{prop:"date",order:"descending"}},on:{"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{fixed:"",prop:"adcreative_template_id",label:"ID",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"adcreative_template_name",label:"广告版位"}}),e._v(" "),i("el-table-column",{attrs:{"filter-placement":"bottom-start","filter-method":e.filterHandler,filters:e.element_type_filter,prop:"adcreative_template_style",label:"创意形式",formatter:e.formatterCrtstyle}}),e._v(" "),i("el-table-column",{attrs:{prop:"adcreative_template_desc",label:"创意规格描述"}})],1),e._v(" "),e.adcreativeTemplateInfo_row.adcreative_sample_image.image?i("div",{staticStyle:{float:"right",width:"200px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.adcreativeTemplateInfo_row.adcreative_sample_image.image}}),e._v(" "),i("div",{staticClass:"sample_image_info"},[i("p",[e._v(e._s(e.adcreativeTemplateInfo_row.adcreative_sample_image.name)+" "),i("br"),e._v(" "),i("span",[e._v("(广告可能出现在以上位置)")])]),e._v(" "),i("span",[e._v(e._s(e.adcreativeTemplateInfo_row.adcreative_template_size))])])]):e._e()],1)]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("上传创意")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("el-tabs",{on:{"tab-click":e.handleTbaClick},model:{value:e.tabActiveName,callback:function(t){e.tabActiveName=t},expression:"tabActiveName"}},e._l(e.tabList,function(t,a){return i("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}},[i("div",{staticClass:"uploadurl-input"},[i("el-input",{attrs:{placeholder:"请输入创意名称",name:"adcreative_name",clearable:""},model:{value:t.adcreative_name,callback:function(i){e.$set(t,"adcreative_name",i)},expression:"tabItem.adcreative_name"}})],1),e._v(" "),t.elementsData.videoList.length>0?i("div",{staticClass:"uploadList-wrap"},e._l(t.elementsData.videoList,function(t,s){return i("div",{key:t.name+s,staticClass:"uploadList-li"},[i("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,s,a,"video")}}}),e._v(" "),i("div",{staticClass:"uploadfile-item"},[i("div",[i("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("\n                      将视频文件拖到此处，或\n                      "),i("em",[e._v("点击上传")]),e._v(" "),i("br"),e._v(" "),i("p",{staticClass:"upload-size"},[e._v("\n                        "+e._s(t.restriction.video_restriction.min_width||t.restriction.video_restriction.width)+"px * "+e._s(t.restriction.video_restriction.min_height||t.restriction.video_restriction.height)+"px "),i("br"),e._v(" "),i("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.video_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.video_restriction.file_size)+"kb")])]),e._v(" "),i("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1)})):e._e(),e._v(" "),t.elementsData.imageList.length>0?i("div",{staticClass:"uploadList-wrap"},e._l(t.elementsData.imageList,function(t,s){return i("div",{key:t.name+s,staticClass:"uploadList-li"},[i("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,s,a,"image")}}}),e._v(" "),i("div",{staticClass:"uploadfile-item"},[t.restriction.image_restriction.width/t.restriction.image_restriction.height<360/191?i("div",{staticClass:"uploadfile-preview"},[(t.restriction.image_restriction.width,t.restriction.image_restriction.height,i("img",{attrs:{height:"130px",src:t.preview_url}}))]):i("div",{staticClass:"uploadfile-preview"},[i("img",{attrs:{height:"130px",src:t.preview_url}})]),e._v(" "),t.preview_url?e._e():i("div",[i("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("\n                      将图片文件拖到此处，或\n                      "),i("em",[e._v("点击上传")]),e._v(" "),i("br"),e._v(" "),i("p",{staticClass:"upload-size"},[e._v("\n                        "+e._s(t.restriction.image_restriction.width)+"px * "+e._s(t.restriction.image_restriction.height)+"px "),i("br"),e._v(" "),i("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.image_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.image_restriction.file_size)+"kb")])]),e._v(" "),i("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1)})):e._e(),e._v(" "),e._l(t.elementsData.enumList,function(a,s){return t.elementsData.enumList.length>0?i("div",{key:a.name+s,staticClass:"uploadurl-input"},[i("el-select",{attrs:{placeholder:a.description},model:{value:a.enumvalue,callback:function(t){e.$set(a,"enumvalue",t)},expression:"uploadItem.enumvalue"}},e._l(a.enum_property.enumeration,function(e,t){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.description}})}))],1):e._e()}),e._v(" "),e._l(t.elementsData.textList,function(a,s){return t.elementsData.textList.length>0?i("div",{key:a.name+s,staticClass:"uploadurl-input"},[i("el-input",{attrs:{placeholder:a.description,name:a.name,clearable:""},model:{value:a.txtvalue,callback:function(t){e.$set(a,"txtvalue",t)},expression:"uploadItem.txtvalue"}})],1):e._e()}),e._v(" "),e._l(t.elementsData.urlList,function(a,s){return t.elementsData.urlList.length>0?i("div",{key:a.name+s,staticClass:"uploadurl-input"},[i("el-input",{attrs:{placeholder:a.description,name:a.name,clearable:""},model:{value:a.url,callback:function(t){e.$set(a,"url",t)},expression:"uploadItem.url"}})],1):e._e()})],2)}))],1)]),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.onSubmit}},[e._v(" 确认修改")]),e._v(" "),i("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(o,l,!1,function(e){i("QTsG")},"data-v-533827ca",null);t.default=d.exports}});
//# sourceMappingURL=21.d820641afebf4a3b1cdc.js.map
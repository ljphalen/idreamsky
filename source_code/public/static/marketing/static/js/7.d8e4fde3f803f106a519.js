webpackJsonp([7],{Ynmp:function(t,a){},vspZ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={created:function(){if(this.account_id){var t=this.$route.params||{};t.hasOwnProperty("ad_id")&&(this.adId=t.ad_id,this.getAd(t.ad_id)),this.getAdGroups(this.adGroupsParams)}},watch:{account_id:function(){var t=this.$route.params||{};t.hasOwnProperty("ad_id")&&(this.adId=t.ad_id,this.getAd(t.ad_id)),this.getAdGroups(this.adGroupsParams)}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id}},data:function(){return{submitLoading:!1,adId:0,loadingAdgroup:!1,adGroupsList:[],adCreativesList:[],site_setList:{},daily_budget:"",ad_name_size:0,form:{adgroup_id:"",adcreative_id:"",ad_name:"",impression_tracking_url:"",click_tracking_url:""},adGroupsParams:{page:1,page_size:100,adgroup_id:"",configured_status:"",adgroup_name:"",start_date:"",end_date:""},adCreativesParams:{page:1,page_size:100,adcreative_id:"",adcreative_name:"",start_date:"",end_date:""}}},mounted:function(){},methods:{remoteAdgroup:function(t){var a=this;this.loadingAdgroup=!0,setTimeout(function(){a.adGroupsParams.adgroup_name=t,a.getAdGroups(a.adGroupsParams)},300)},adGroupChange:function(t){var a;a=this.adGroupsList.find(function(a){return a.adgroup_id===t}),this.getAdcreatives({campaign_id:a.campaign_id,product_type:a.product_type,product_refs_id:a.product_refs_id})},newAdGroup:function(){this.$router.push("/advertising/adGroup/new")},newCreativity:function(){this.$router.push("/advertising/adCreative/new")},adNameChange:function(){this.ad_name_size=this.form.ad_name.length},dailybudgetChange:function(){this.form.daily_budget=10*this.daily_budget*10},onCancel:function(){this.$router.push("/advertising/ad")},onSubmit:function(){var t=this.form,a=this;t.account_id=this.account_id,a.submitLoading=!0,this.$axios.get("/Admin/Marketing_Ads/add",{params:t}).then(function(t){var e=t.data;a.submitLoading=!1,0==e.code?(a.$message({type:"success",message:e.msg}),setTimeout(function(){a.$router.push("/advertising/ad")},500)):a.$message.error(e.msg)}).catch(function(t){a.$message("网络繁忙，请稍后再试！"),a.submitLoading=!1,console.log(t)})},getAdCommongetEnum:function(){var t=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(a){var e=a.data;0==e.code&&(t.site_setList=e.data.SITE_SET)}).catch(function(t){console.log(t)})},getAdGroups:function(t){var a=this;t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Adgroups/get",{params:t}).then(function(t){var e=t.data;0==e.code?(e.data.list||e.data.page_info)&&(a.adGroupsList=e.data.list,console.log("adGroupsList:",a.adGroupsList),a.loadingAdgroup=!1):(a.$message(e.msg),a.loadingAdgroup=!1)}).catch(function(t){a.$message("网络繁忙，请稍后再试！"),a.loadingAdgroup=!1})},getAdcreatives:function(t){var a=this;t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Adcreatives/get",{params:t}).then(function(t){var e=t.data;if(0==e.code){if(e.data.list||e.data.page_info){a.adCreativesList=e.data.list;a.adCreativesList.find(function(t){return t.adcreative_id===a.form.adcreative_id})||(a.form.adcreative_id=""),console.log("adCreativesList:",a.adCreativesList)}}else a.$message(e.msg)}).catch(function(t){a.$message("网络繁忙，请稍后再试！")})},getAd:function(t){var a=this;this.$axios.get("/Admin/Marketing_Ads/get",{params:{ad_id:t,account_id:this.account_id}}).then(function(t){var e=t.data;if(0==e.code&&e.data.list[0]){a.form.adgroup_id=e.data.list[0].adgroup_id,a.form.adcreative_id=e.data.list[0].adcreative.adcreative_id;var i=e.data.list[0].campaign_id;a.getAdcreatives({campaign_id:i}),a.form.ad_name=e.data.list[0].ad_name+"-复制",a.adNameChange(),a.form.impression_tracking_url=e.data.list[0].impression_tracking_url,a.form.click_tracking_url=e.data.list[0].click_tracking_url,a.form.feeds_interaction_enabled=e.data.list[0].feeds_interaction_enabled}}).catch(function(t){console.log(t)})}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"template-container"},[e("div",{staticClass:"template-container-title"},[t._v("新建广告")]),t._v(" "),e("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[e("div",{staticClass:"temp-item-block"},[e("div",{staticClass:"temp-item-title"},[t._v("广告组")]),t._v(" "),e("div",{staticClass:"temp-item-main"},[e("el-form-item",{attrs:{label:"所属广告组"}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:"选择广告组","remote-method":t.remoteAdgroup,loading:t.loadingAdgroup},on:{change:t.adGroupChange},model:{value:t.form.adgroup_id,callback:function(a){t.$set(t.form,"adgroup_id",a)},expression:"form.adgroup_id"}},t._l(t.adGroupsList,function(t){return e("el-option",{key:t.adgroup_id,attrs:{"product-type":t.product_type,label:t.adgroup_name,value:t.adgroup_id}})}))],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.newAdGroup}},[t._v("新建广告组")])],1)],1)]),t._v(" "),e("div",{staticClass:"temp-item-block"},[e("div",{staticClass:"temp-item-title"},[t._v("创意选择")]),t._v(" "),e("div",{staticClass:"temp-item-main"},[e("el-form-item",{attrs:{label:"关联创意"}},[e("el-select",{attrs:{filterable:"",placeholder:"选择创意"},model:{value:t.form.adcreative_id,callback:function(a){t.$set(t.form,"adcreative_id",a)},expression:"form.adcreative_id"}},t._l(t.adCreativesList,function(t){return e("el-option",{key:t.adcreative_id,attrs:{"product-type":t.product_type,label:t.adcreative_name,value:t.adcreative_id}})}))],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.newCreativity}},[t._v("上传创意")])],1)],1)]),t._v(" "),e("div",{staticClass:"temp-item-block"},[e("div",{staticClass:"temp-item-title"},[t._v("广告名称")]),t._v(" "),e("div",{staticClass:"temp-item-main"},[e("div",{staticClass:"temp-item-block"},[e("label",{staticClass:"temp-item-label",attrs:{for:""}},[t._v("曝光监控地址：")]),t._v(" "),e("div",{staticClass:"temp-item-inlineblock"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.impression_tracking_url,expression:"form.impression_tracking_url"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:""},domProps:{value:t.form.impression_tracking_url},on:{input:function(a){a.target.composing||t.$set(t.form,"impression_tracking_url",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"temp-item-block"},[e("label",{staticClass:"temp-item-label",attrs:{for:""}},[t._v("点击监控地址：")]),t._v(" "),e("div",{staticClass:"temp-item-inlineblock"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.click_tracking_url,expression:"form.click_tracking_url"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:""},domProps:{value:t.form.click_tracking_url},on:{input:function(a){a.target.composing||t.$set(t.form,"click_tracking_url",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"temp-item-block"},[e("label",{staticClass:"temp-item-label",attrs:{for:""}},[t._v("广告名称：")]),t._v(" "),e("div",{staticClass:"temp-item-inlineblock"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ad_name,expression:"form.ad_name"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:"",maxlength:"40"},domProps:{value:t.form.ad_name},on:{input:[function(a){a.target.composing||t.$set(t.form,"ad_name",a.target.value)},t.adNameChange]}}),t._v(" "),e("span",{staticClass:"temp-item-inlayremark"},[t._v(t._s(t.ad_name_size)+"/40")])])])])]),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),e("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=e("VU/8")(i,s,!1,function(t){e("Ynmp")},"data-v-29c5dc8c",null);a.default=r.exports}});
//# sourceMappingURL=7.d8e4fde3f803f106a519.js.map
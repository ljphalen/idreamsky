webpackJsonp([25],{CZgq:function(e,t){},Ftt1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={created:function(){this.getEnumList();var e,t=new RegExp("(^| )PHPSESSID=([^;]*)(;|$)");(e=document.cookie.match(t))&&(this.uploadHeaders={"VUE-SESSID":unescape(e[2])})},watch:{account_id:function(){}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id}},data:function(){return{loading:!1,name_size:0,description_size:0,form:{user_id_type:"",name:"",description:""},file_name:"",user_id_type_list:{},fileList:[],upLoadData:{}}},methods:{onCancel:function(){this.$router.push("/setting/audience")},audienceNameChange:function(e){this.name_size=this.form.name.length},changeFromFile:function(e,t){this.file_name=e.name},myUpload:function(e){var t=e.file,i=this;i.loading=!0;var a=new FormData;a.append("account_id",i.account_id),a.append("user_id_type",i.form.user_id_type),a.append("name",i.form.name),a.append("description",i.form.description),a.append("type",i.form.type),a.append("file",t);var s=new XMLHttpRequest;s.open("POST","/Admin/Marketing_CustomAudienceFiles/add"),s.setRequestHeader("VUE-SESSID",this.uploadHeaders["VUE-SESSID"]),s.send(a),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){var e=JSON.parse(s.response);i.loading=!1,0==e.code?(i.$message({type:"success",message:e.msg}),setTimeout(function(){i.$router.push("/setting/audience")},500)):i.$message.error(e.msg)}else i.loading=!1,i.$message("网络异常，请稍后再试！")}},onSubmit:function(){return""==this.form.user_id_type?(this.$message.error("请选择数据类型"),!1):""==this.file_name?(this.$message.error("请上传文件"),!1):""==this.form.name?(this.$message.error("请填写人群名称"),!1):void this.$refs.upload.submit()},getEnumList:function(){var e=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(t){var i=t.data;0==i.code&&(e.user_id_type_list=i.data.USER_ID_TYPE)}).catch(function(e){console.log(e)})},handleRemove:function(e,t){this.file_name=""},handlePreview:function(e){console.log(e)}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"template-container"},[i("div",{staticClass:"template-container-title"},[e._v("创建人群-号码文件")]),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.form}},[i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("1.选择数据类型")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("div",[i("el-radio-group",{staticClass:"temp-radio-group",model:{value:e.form.user_id_type,callback:function(t){e.$set(e.form,"user_id_type",t)},expression:"form.user_id_type"}},e._l(e.user_id_type_list,function(t,a){return i("span",{key:a,staticClass:"temp-radio-item",staticStyle:{"padding-right":"20px"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.desc,placement:"bottom"}},[i("el-radio-button",{attrs:{label:a}},[e._v(e._s(t.name))])],1)],1)}))],1)])]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("2.上传文件")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("div",{staticClass:"upload-desc"},[i("ul",{staticClass:"list-group"},[i("li",[e._v("• 请将号码写在*.txt（UTF-8编码）格式的文档中，一行一个号码。")]),e._v(" "),i("li",[e._v("• 支持直接上传*.txt格式文件，也支持对单个/多个*.txt文档进行压缩成Zip格式上传。")]),e._v(" "),i("li",[e._v("• 单个文件大小不超过1G。")])])]),e._v(" "),i("div",{staticStyle:{width:"330px","padding-top":"15px"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/Admin/Marketing_CustomAudienceFiles/add","http-request":e.myUpload,"on-change":e.changeFromFile,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1,limit:1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)])]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[e._v("3.人群名称")]),e._v(" "),i("div",{staticClass:"temp-item-main"},[i("div",{staticClass:"temp-item-block"},[i("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("人群名称：")]),e._v(" "),i("div",{staticClass:"temp-item-inlineblock"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"temp-long-inputtext",attrs:{type:"text",maxlength:"32"},domProps:{value:e.form.name},on:{input:[function(t){t.target.composing||e.$set(e.form,"name",t.target.value)},e.audienceNameChange]}}),e._v(" "),i("span",{staticClass:"temp-item-inlayremark"},[e._v(e._s(e.name_size)+"/32")])])]),e._v(" "),i("div",{staticClass:"temp-item-block"},[i("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("人群描述：")]),e._v(" "),i("div",{staticClass:"temp-item-inlineblock"},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"（选填）"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)])])]),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("开始上传")]),e._v(" "),i("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n=i("VU/8")(a,s,!1,function(e){i("CZgq")},"data-v-1260a031",null);t.default=n.exports}});
//# sourceMappingURL=25.d4439665f8d79d6046e3.js.map
webpackJsonp([22],{LSnE:function(e,t){},NxFO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),s=a.n(i),r=a("pFYg"),n=a.n(r),o=a("mvHQ"),l=a.n(o),c={components:{"v-target":a("xHFA").a},created:function(){var e,t=new RegExp("(^| )PHPSESSID=([^;]*)(;|$)");(e=document.cookie.match(t))&&(this.uploadHeaders={"VUE-SESSID":unescape(e[2])}),this.getEnum()},watch:{account_id:function(){0==this.targetList.length&&this.getTargetList()},form_list:function(){this.getEstimation()},product_refs_id:function(){this.disabledOcpa=!0,""!=this.form.product_refs_id?(this.ocpaMessage="检查APP是否达到oCPA使用门槛中...",this.checkOcpa()):(this.ocpaMessage="选择标的物，达到门槛方可选择","BILLINGEVENT_OCPA"==this.form.billing_event&&(this.form.billing_event="",this.form.optimization_goal=""))}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id},form_list:function(){var e={},t=["site_set","product_type","billing_event","optimization_goal","product_refs_id","time_range","start_time","end_time","time_senior_type","time_series","target","adcreative_template_id"];for(var a in t)e[a]=this.form[t[a]];return l()(e)},product_refs_id:function(){return this.form.product_refs_id},element_type_filter:function(){var e=[],t={};return this.adcreativeList.forEach(function(a){t.hasOwnProperty(a.adcreative_template_style)||(t[a.adcreative_template_style]=a.adcreative_template_style,e.push({text:a.adcreative_template_style,value:a.adcreative_template_style}))}),e}},mounted:function(){0==this.targetList.length&&this.getTargetList()},methods:{adNameChange:function(e,t){t.ad_name&&(t.ad_name_size=t.ad_name.length)},handleCurrentChange:function(e,t){var a=this;this.adcreativeTemplateInfo_row={adcreative_sample_image:{}},e?(this.form.adcreative_template_id=e.adcreative_template_id,this.adcreativeTemplateInfo_row=e,this.activeAdcreativeList?this.$confirm("更改创意规格将会清空已上传创意，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.defaultCreativity(),a.uploadElementFiltrate()}).catch(function(){a.defaultCreativity()}):(this.activeAdcreativeList=!0,this.uploadElementFiltrate())):(this.activeAdcreativeList=!1,this.defaultCreativity())},filterHandler:function(e,t){return t.adcreative_template_style===e},formatterCrtstyle:function(e,t,a){return e.adcreative_template_size+e.adcreative_template_style},uploadElementFiltrate:function(){var e=this.adcreativeTemplateInfo_row,t=this.cloneObj(e.adcreative_elements),a={imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],structList:[],referenceList:[]},i=[];for(var s in t){if("ELEMENT_TYPE_STRUCT"==(m=t[s]).element_type){var r={},n=new Object;n.element_type="ELEMENT_TYPE_STRUCT",n.parent=m,n.name=m.name,n.children=[];for(var o in t)t[o].parent_name==m.name&&(r[t[o].name]=t[o]);if(m.array_property&&m.array_property.max_number){var l=m.array_property.max_number;for(s=0;s<l;s++)n.children.push(r)}else n.children.push(r);i.push(n)}else""==m.parent_name&&i.push(m)}for(var c in i){var m;if("ELEMENT_TYPE_STRUCT"!=(m={}).element_type&&(m=this.dataClassify(i[c])),"ELEMENT_TYPE_IMAGE"==m.element_type)a.imageList.push(m);else if("ELEMENT_TYPE_TEXT"==m.element_type)a.textList.push(m);else if("ELEMENT_TYPE_VIDEO"==m.element_type)a.videoList.push(m);else if("ELEMENT_TYPE_URL"==m.element_type)a.urlList.push(m);else if("ELEMENT_TYPE_ENUM"==m.element_type)a.enumList.push(m);else if("ELEMENT_TYPE_CANVAS"==m.element_type)a.canvasList.push(m);else if("ELEMENT_TYPE_REFERENCE"==m.element_type)a.referenceList.push(m);else if("ELEMENT_TYPE_STRUCT"==m.element_type){r=i[c].children;var d=[];for(var s in r){var p={};for(var _ in r[s])p[_]=this.dataClassify(r[s][_]);d.push(p)}var u={parent:this.cloneObj(i[c].parent),children:d};a.structList.push(u)}}this.tabList[0].elementsData=this.cloneObj(a),this.tabList[1].elementsData=this.cloneObj(a),console.log("this.tabList[0]:",this.tabList[0])},dataClassify:function(e){if("ELEMENT_TYPE_IMAGE"==e.element_type){var t="",a=e.restriction.image_restriction.file_format;for(var i in a){t=t+this.imageTypeClassify(a[i])+"/"}t=t.substring(0,t.length-1),e.restriction.image_restriction.file_format_text=t,e.progressbar={status:"",percentage:0},e.preview_url="",e.itemvalue=""}else if("ELEMENT_TYPE_TEXT"==e.element_type)e.itemvalue="";else if("ELEMENT_TYPE_VIDEO"==e.element_type){t="",a=e.restriction.video_restriction.file_format;for(var i in a){t=t+this.videoTypeClassify(a[i])+"/"}t=t.substring(0,t.length-1),e.restriction.video_restriction.file_format_text=t,e.progressbar={status:"",percentage:0},e.preview_url="",e.itemvalue=""}else"ELEMENT_TYPE_URL"==e.element_type?e.itemvalue="":"ELEMENT_TYPE_ENUM"==e.element_type?(e.description="请选择"+e.description,e.itemvalue=""):"ELEMENT_TYPE_CANVAS"==e.element_type||e.element_type;return e},handleTbaClick:function(e,t){if("add"==e.name&&this.activeAdcreativeList){var a=this.cloneObj(this.tabList[e.index].elementsData);this.tabList.splice(e.index,0,{label:"创意"+(parseInt(e.index)+1),name:e.index,adcreative_name:"",ad_name:"",ad_name_size:0,elementsData:a}),this.tabActiveName=e.index}else"add"==e.name&&(this.$message("请选择创意规格"),this.tabActiveName="0")},getAdgroups:function(e){var t=this;t.adGroupLoading=!0;var a={page:1,page_size:100,adgroup_name:"",system_status:"",product_type:"",adgroup_id:"",start_date:"",end_date:"",campaign_id:e};a.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Adgroups/get",{params:a}).then(function(e){t.adGroupLoading=!1;var a=e.data;0==a.code?(a.data.list||a.data.page_info)&&(t.adgroupsList=a.data.list):t.$message(a.msg)}).catch(function(e){t.adGroupLoading=!1,t.$message("获取广告组失败")})},adgroupChange:function(e){var t=this;for(var a in t.adgroupsList)if(t.adgroupsList[a].adgroup_id==e){t.form.site_set=t.adgroupsList[a].site_set[0],t.siteSetChange(t.form.site_set),t.form.product_refs_id=t.adgroupsList[a].product_refs_id,t.form.sub_product_refs_id=t.adgroupsList[a].sub_product_refs_id,t.productChange(t.adgroupsList[a].product_refs_id);break}},handleAdGroupClick:function(e){"chooseAdGroup"==e.name&&"chooseCampaign"==this.campaignActiveName||(this.form.adgroup_id="",this.adGroupActiveName="newAdGroup")},getProducts:function(e){var t=this,a={account_id:this.account_id,product_type:e};this.$axios.get("/Admin/Marketing_Products/list",{params:a}).then(function(e){t.nextLoading=!1;var a=e.data;0==a.code?t.productList=a.data:t.$message(a.msg)}).catch(function(e){t.nextLoading=!1,t.$message("标的物列表获取失败！")})},pickerDateChange:function(){var e=new Date(this.pickerDate[0]),t=new Date(this.pickerDate[1]);this.form.begin_date=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),this.form.end_date=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},dateRangeChange:function(e){"1"===e?this.timeShow=!0:(this.timeShow=!1,this.form.startTime="00:00",this.form.endTime="24:00")},billingEventChange:function(e){this.amountName="BILLINGEVENT_IMPRESSION"==e?"千次曝光":"BILLINGEVENT_CLICK"==e?"点击":"激活",this.optimizationGoalList={};for(var t in this.optimizationGoalConfig)this.optimizationGoalConfig[t].billing_event==e&&(this.optimizationGoalList[t]=this.optimizationGoalConfig[t]);this.optimizationGoalList.hasOwnProperty(this.form.optimization_goal)||(this.form.optimization_goal=""),this.form.bid_amount=""},adgroupNameChange:function(e){this.adgroup_name_size=this.form.adgroup_name.length},getAdcreativetemplateinfo:function(){var e=this;this.adCreativeTableLoading=!0;var t={product_type:e.form.product_type,site_set:e.form.site_set,account_id:e.account_id};this.$axios.post("/Admin/Marketing_Adcreativetemplateinfo/get",t).then(function(t){var a=t.data;0==a.code?e.adcreativeList=a.data.list:e.$message(a.msg),e.adCreativeTableLoading=!1}).catch(function(t){e.adCreativeTableLoading=!1,e.$message("网络繁忙，请稍后再试！"),console.log(t)})},siteSetChange:function(e){""!=this.form.product_type&&""!=this.form.site_set&&this.getAdcreativetemplateinfo()},productChange:function(e){"PRODUCT_TYPE_APP_ANDROID_OPEN_PLATFORM"==this.form.product_type?(this.subProductShow=!0,this.subProductLoading=!0,this.subProductList=[],this.getSubProducts({product_type:this.form.product_type,product_refs_id:e})):(this.subProductShow=!1,this.form.sub_product_refs_id="");var t;t=this.productList.find(function(t){return t.product_refs_id===e}),this.form.destination_url=t.product_url},getTargetList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this,a={};"number"==typeof e?a.targeting_id=e:"string"==typeof e&&e.length>0&&(a.filtering=e),a.account_id=this.account_id,this.account_id&&(this.loading=!0,this.$axios.get("/Admin/Marketing_Targetings/get",{params:a}).then(function(a){t.loading=!1;var i=a.data;if(0==i.code)if(i.data.list.forEach(function(e){t.targetIds.hasOwnProperty(e.targeting_id)||(t.targetIds[e.targeting_id]=e,t.targets.push(e))}),"number"==typeof e){if(0==t.targets.length||!t.targetIds.hasOwnProperty(e)){var s={targeting_id:e,targeting_name:"无效ID:"+e};t.targets.push(s),t.targetIds[e]=s}t.targetList=t.targets,t.target=t.targetIds[e],t.form.target=t.targetIds[e],t.targetId=t.target.targeting_id}else"string"==typeof e&&t.updateTargetList(e);else t.$message(i.msg)}).catch(function(e){t.loading=!1,t.$message("请求getTargetList网络繁忙，请稍后再试!"),console.log(e)}))},updateTargetList:function(e){this.targetList=this.targets.filter(function(t){return t.targeting_name.toLowerCase().indexOf(e.toLowerCase())>-1})},remoteMethod:function(e){var t=this;setTimeout(function(){t.getTargetList(e)},200)},changeTargetId:function(e){e&&this.targetIds.hasOwnProperty(e)&&(this.target=this.targetIds[e],this.form.target=this.targetIds[e])},changeTarget:function(e){e&&(this.targetIds.hasOwnProperty(e.targeting_id)||(this.targetList.push(e),this.targetIds[e.targeting_id]=e),this.target=e,this.form.target=e,this.targetId=e.targeting_id),this.dialogVisible=!1},handleConfirmClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},editTarget:function(e){this.dialogTitle="编辑定向包",this.dialogVisible=!0},handleCampaignClick:function(e){"chooseCampaign"==e.name?this.getAdCampaigns():(this.adGroupActiveName="newAdGroup",this.form.campaign_id="")},adCampaignsChange:function(e){this.form.adgroup_id="",this.getAdgroups(this.form.campaign_id);var t=this,a=this.adCampaignsList;for(var i in a)if(a[i].campaign_id==e){t.form.campaign_type=a[i].campaign_type,t.product_type=a[i].product_type,t.form.product_type=a[i].product_type;var s=[a[i].campaign_type];t.productTypeChange(s),t.campaignTypeChange(t.form.campaign_type);break}},productTypeChange:function(e){var t=this;1==this.step?(this.form.product_type=this.product_type,this.checkProductType(),""!=this.form.product_type&&""!=this.form.site_set&&this.getAdcreativetemplateinfo()):this.$confirm("修改推广目标，已填写的广告内容将会被清空","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.step=1,t.form.product_type=t.product_type,t.checkProductType(),""!=t.form.product_type&&""!=t.form.site_set&&t.getAdcreativetemplateinfo()}).catch(function(){return t.product_type=t.form.product_type,!1});this.campaignTypeList={};var a=this.form.campaign_type;this.form.campaign_type="";for(var i in e)e[i]==a&&(this.form.campaign_type=a),this.campaignTypeList[e[i]]=this.campaignTypeConfig[e[i]]},checkProductType:function(){var e=this.form.product_type,t=this;1===t.productTypeList[e].product_refs_id?(t.productShow=!0,t.destinationUrlShow=!1,t.getProducts(e)):(t.productShow=!1,t.destinationUrlShow=!0,t.form.product_refs_id="",t.form.destination_url="")},campaignTypeChange:function(e){this.siteSetList={};var t=this.campaignTypeList[e].site_set;for(var a in t)this.siteSetList[t[a]]=this.siteSetConfig[t[a]]},campaignNameChange:function(e){this.campaign_name_size=this.form.campaign_name.length},getAdCampaigns:function(){var e=this;this.campaignLoading=!0;var t={page:1,page_size:100,campaign_id:"",configured_status:"",campaign_name:"",start_date:"",end_date:""};t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Campaigns/get",{params:t}).then(function(t){e.campaignLoading=!1;var a=t.data;0==a.code?(a.data.list||a.data.page_info)&&(e.adCampaignsList=a.data.list):e.$message(a.msg)}).catch(function(t){e.campaignLoading=!1,e.$message("计划列表加载失败")})},getSubProducts:function(e){var t=this;e.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Products/get",{params:e}).then(function(e){var a=e.data;t.subProductLoading=!1,0==a.code?t.subProductList=a.data.subordinate_product_list:t.$message(a.msg)}).catch(function(e){t.subProductLoading=!1,t.$message("网络繁忙，请稍后再试！")})},getEnum:function(){var e=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(t){var a=t.data;0==a.code&&(e.productTypeList=a.data.PRODUCT_TYPE,e.campaignTypeConfig=a.data.CAMPAIGN_TYPE,e.speedModeList=a.data.SPEED_MODE,e.siteSetConfig=a.data.SITE_SET,e.optimizationGoalConfig=a.data.OPTIMIZATION_GOAL)}).catch(function(e){console.log(e)})},getEstimation:function(){var e=this,t={};t.adgroup=this.form,t.adcreative={adcreative_template_id:this.form.adcreative_template_id},t.account_id=this.account_id,this.$axios.post("/Admin/Marketing_Estimation/get",t).then(function(t){var a=t.data;if(0==a.code){var i=a.data.min_bid_amount/100,s=a.data.max_bid_amount/100;e.amountRange=i+"~"+s,e.approximate_count=(a.data.approximate_count+"").replace(/(?=(?!(\b))(\d{3})+$)/g,","),e.impression=(a.data.impression+"").replace(/(?=(?!(\b))(\d{3})+$)/g,",")}}).catch(function(t){e.$message("网络繁忙，请稍后再试！"),console.log(t)})},checkOcpa:function(){var e=this,t={};t.product_type=this.form.product_type,t.product_refs_id=this.form.product_refs_id,t.account_id=this.account_id,this.$axios.post("/Admin/Marketing_Products/checkOcpa",t).then(function(t){var a=t.data;0==a.code?e.disabledOcpa=!1:"BILLINGEVENT_OCPA"==e.form.billing_event&&(e.form.billing_event="",e.form.optimization_goal=""),e.ocpaMessage=a.msg}).catch(function(e){console.log(e)})},defaultCreativity:function(){this.tabActiveName="0",this.tabList=[{label:"创意1",name:"0",adcreative_name:"",ad_name:"",ad_name_size:0,elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}},{label:"+ 添加",name:"add",adcreative_name:"",ad_name:"",ad_name_size:0,elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}}]},cloneObj:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,a=e.constructor===Array?[]:{};if("object"===(void 0===e?"undefined":n()(e))){if(window.JSON)t=l()(e),a=JSON.parse(t);else for(var i in e)a[i]="object"===n()(e[i])?cloneObj(e[i]):e[i];return a}}),imageTypeClassify:function(e){var t="";return"IMAGE_TYPE_GIF"==e?t="gif":"IMAGE_TYPE_JPG"==e?t="jpg":"IMAGE_TYPE_PNG"==e?t="png":"IMAGE_TYPE_SWF"==e&&(t="swf"),t},videoTypeClassify:function(e){var t="";return"MEDIA_TYPE_MP4"==e?t="mp4":"MEDIA_TYPE_AVI"==e?t="avi":"MEDIA_TYPE_MOV"==e?t="mov":"MEDIA_TYPE_FLV"==e&&(t="flv"),t},uploadfileChange:function(e,t,a,i,s,r){var n,o,l,c,m=this,d=(e.target||e.currentTarget).files[0],p={};if(p=s?m.tabList[a].elementsData.structList[t].children[r][s]:"image"==i?m.tabList[a].elementsData.imageList[t]:m.tabList[a].elementsData.videoList[t],"image"==i){var _=p.restriction;n=_.image_restriction.height,o=_.image_restriction.width,l=_.image_restriction.file_size,c=_.image_restriction.file_format}else if("video"==i){_=p.restriction;n=_.video_restriction.min_height||_.video_restriction.height,o=_.video_restriction.min_width||_.video_restriction.width,l=_.video_restriction.file_size,c=_.video_restriction.file_format}if(!d)return!1;if(d.size/1024>l)return this.$message("上传文件不能超过"+l+"kb"),!1;if(!this.formatCheck(c,d.type,i))return this.$message("上传文件格式不正确"),!1;if("image"==i)(u=new FileReader).onload=function(e){var l=e.target.result,c=new Image;c.onload=function(){var e=c.width,l=c.height;o==e&&n==l?m.uploadFileAction(d,t,a,i,s,r):m.$message("上传文件尺寸不正确")},c.src=l},u.readAsDataURL(d);else if("video"==i){var u=new FileReader;d.type;u.onload=function(e){var l=e.target.result,c=document.createElement("video");document.body.appendChild(c),c.addEventListener("loadedmetadata",function(e){c.videoWidth==o&&c.videoHeight==n?m.uploadFileAction(d,t,a,i,s,r):m.$message("上传文件尺寸不正确"),c.remove()}),c.setAttribute("src",l)},u.readAsDataURL(d)}},uploadFileAction:function(e,t,a,i,s,r){var n,o=this,l="";n=s?o.tabList[a].elementsData.structList[t].children[r][s]:"image"==i?o.tabList[a].elementsData.imageList[t]:o.tabList[a].elementsData.videoList[t],"image"==i?l="/Admin/Marketing_Images/add":"video"==i&&(l="/Admin/Marketing_Videos/add");var c=new FormData;c.append("account_id",o.account_id),c.append("file",e),"video"==i&&c.append("description",e);var m=new XMLHttpRequest;m.upload.addEventListener("progress",function(e){e.lengthComputable?(n.progressbar.percentage=60,Math.round(100*e.loaded/e.total),n.progressbar.status="success"):complete&&(n.progressbar.status="success")},!1),m.addEventListener("load",function(e){},!1),m.addEventListener("error",function(e){n.progressbar.status="exception",console.log(e)},!1),m.addEventListener("abort",function(){console.log(evt)},!1),m.open("POST",l),m.setRequestHeader("VUE-SESSID",this.uploadHeaders["VUE-SESSID"]),m.send(c),m.onreadystatechange=function(){if(4==m.readyState)if(200==m.status){var e=JSON.parse(m.response);0==e.code?(n.progressbar.percentage=100,n.progressbar.status="success",n.preview_url=e.data.preview_url,n.itemvalue="video"==i?e.data.video_id:e.data.image_id):(o.$message(e.msg),n.progressbar.status="exception")}else n.progressbar.status="exception"}},formatCheck:function(e,t,a){var i="";for(var s in e)if("image"==a){i=i+("jpg"==this.imageTypeClassify(e[s])?"jpg|jpeg":this.imageTypeClassify(e[s]))+"|"}else i=i+this.videoTypeClassify(e[s])+"|";return i=i.substring(0,i.length-1),new RegExp("/("+i+")$").test(t)},stepNext_1:function(){var e=this.form;if(console.log(this.form),"newCampaign"==this.campaignActiveName){if(!e.product_type&&""==e.product_type)return this.$message.error("请选择推广目标"),!1;if(!e.campaign_type&&""==e.campaign_type)return this.$message.error("请选择计划类型"),!1;if("CAMPAIGN_TYPE_WECHAT_MOMENTS"!=e.campaign_type&&!e.daily_budget&&""==e.daily_budget)return this.$message.error("请填写日限额"),!1;if(!e.speed_mode&&""==e.speed_mode)return this.$message.error("请选择投放速度"),!1;if(!e.campaign_name&&""==e.campaign_name)return this.$message.error("请填写计划名称"),!1;this.step=2}else{if(!e.campaign_id&&""==e.campaign_id)return this.$message.error("请选择推广计划"),!1;this.step=2}},stepNext_2:function(){var e=this.form;if("newAdGroup"==this.adGroupActiveName){if(!e.site_set&&""==e.site_set)return this.$message.error("请选择投放媒体"),!1;if("CAMPAIGN_TYPE_WECHAT_MOMENTS"==e.campaign_type&&!e.daily_budget&&""==e.daily_budget)return this.$message.error("请填写日限额"),!1;this.step=3}else{if(!e.adgroup_id&&""==e.adgroup_id)return this.$message.error("请选择广告组"),!1;this.step=3}},onSubmit:function(){for(var e=this,t=this.tabList,a=!1,i="",s=[],r=0;r<t.length-1;r++){var n=t[r].elementsData,o=new Object;if(o.adcreative_name=t[r].adcreative_name,o.ad_name=t[r].ad_name,!t[r].adcreative_name&&t[r].adcreative_name.length>120){a=!0,i=t[r].name+"请填写字数在(1-120)的创意名称";break}var l=[];for(var c in n)if("structList"==c)for(var m in n[c]){var d=n[c][m].children;for(var p in d)for(var _ in d[p])l.push(d[p][_])}else for(var m in n[c])"ELEMENT_TYPE_STRUCT"!=n[c][m].element_type&&l.push(n[c][m]);for(var c in l){var u=l[c],v=r+1;if("ELEMENT_TYPE_IMAGE"==u.element_type){if(u.required&&!u.itemvalue){a=!0,i="创意"+v+"请上传图片";break}}else if("ELEMENT_TYPE_VIDEO"==u.element_type){if(u.required&&!u.itemvalue){a=!0,i="创意"+v+"请上传视频";break}}else if("ELEMENT_TYPE_TEXT"==u.element_type){if(u.required&&!u.itemvalue){a=!0,i="创意"+v+"请填写"+u.description;break}if(u.itemvalue&&u.restriction&&u.restriction.text_restriction&&(u.restriction.text_restriction.max_length<u.itemvalue.length||u.restriction.text_restriction.min_length>u.itemvalue.length)){a=!0,i="创意"+v+u.description+"请输入"+u.restriction.text_restriction.min_length+"~"+u.restriction.text_restriction.max_length+"的字符";break}}else if("ELEMENT_TYPE_URL"==u.element_type){if(u.required&&!u.itemvalue){a=!0,i="创意"+v+u.description+"不能为空";break}if(u.itemvalue&&u.restriction&&u.restriction.url_restriction){var g=u.restriction.url_restriction.url_pattern;if(!new RegExp(g).test(u.itemvalue)){a=!0,i="创意"+v+u.description+"格式不正确";break}}}else if("ELEMENT_TYPE_ENUM"==u.element_type&&u.required&&!u.itemvalue){a=!0,i="创意"+v+"请选择"+u.description;break}}if(a)break;for(var c in n){var f=n[c];for(var p in f)if(f[p].children){var h=f[p].children,b=[];for(var C in h){var L={};for(var _ in h[C])L[_]=h[C][_].itemvalue;b.push(L)}1==b.length?o[f[p].parent.name]=b[0]:o[f[p].parent.name]=b}else o[f[p].name]=f[p].itemvalue}s.push(o)}if(a)return e.$message(i),!1;this.form.adcreative_elements=s,console.log(this.form),e.submitLoading=!0;var E=this.form;E.account_id=e.account_id,e.$axios.post("/Admin/Marketing_Addetail/add",E).then(function(t){var a=t.data;e.submitLoading=!1,0==a.code?(e.$message({type:"success",message:a.msg}),setTimeout(function(){e.$router.push("/advertising/campaign")},500)):e.$message.error(a.msg)}).catch(function(t){e.submitLoading=!1,e.$message("网络繁忙，请稍后再试！"),console.log(t)})}},data:function(){var e,t;return t={submitLoading:!1,campaignActiveName:"newCampaign",campaignLoading:!1,subProductLoading:!1,productTypeList:{},campaignTypeList:{},campaignTypeConfig:{},speedModeList:{},adCampaignsList:[],campaign_name_size:"",product_type:"",adGroupActiveName:"newAdGroup",adGroupLoading:!1,adgroupsList:[],productShow:!1,subProductShow:!1,productList:[],subProductList:[],siteSetList:{},siteSetConfig:{},pickerDate:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timeShow:!1,amountName:"点击",ocpaMessage:"选择标的物，达到门槛方可选择",disabledOcpa:!0,optimizationGoalConfig:{},optimizationGoalList:{}},s()(t,"amountName","点击"),s()(t,"amountRange","0~0"),s()(t,"approximate_count",0),s()(t,"impression",0),s()(t,"adgroup_name_size",0),s()(t,"destinationUrlShow",!1),s()(t,"adCreativeTableLoading",!1),s()(t,"adcreativeList",[]),s()(t,"adcreativeTemplateInfo_row",{adcreative_sample_image:{}}),s()(t,"tabActiveName","0"),s()(t,"tabList",[{label:"创意1",name:"0",adcreative_name:"",elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}},{label:"+ 添加",name:"add",adcreative_name:"",elementsData:{imageList:[],textList:[],videoList:[],urlList:[],enumList:[],canvasList:[],referenceList:[]}}]),s()(t,"dialogConfirmVisible",!1),s()(t,"dialogVisible",!1),s()(t,"loading",!1),s()(t,"targetIds",{}),s()(t,"targetId",""),s()(t,"targets",[]),s()(t,"targetList",[]),s()(t,"target",{targeting_id:"",targeting_name:""}),s()(t,"dialogTitle",""),s()(t,"step",1),s()(t,"form",(e={campaign_id:"",product_type:"",campaign_type:"",daily_budget:"",speed_mode:"",campaign_name:"",adgroup_id:"",product_refs_id:"",sub_product_refs_id:"",site_set:"",target:{},begin_date:""},s()(e,"begin_date",""),s()(e,"time_range","0"),s()(e,"start_time","00:00"),s()(e,"end_time","24:00"),s()(e,"billing_event",""),s()(e,"optimization_goal",""),s()(e,"bid_amount",""),s()(e,"adgroup_name",""),s()(e,"adcreative_template_id",""),s()(e,"destination_url",""),e)),t}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-container"},[a("el-popover",{ref:"popover1",attrs:{placement:"right-start",title:"",width:"200",trigger:"hover",content:"推广计划是广告的集合，您可以对同一个推广计划下的多个广告，统一控制限额和投放方式等。"}}),e._v(" "),a("div",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"template-item-title"},[e._v("推广计划")]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleCampaignClick},model:{value:e.campaignActiveName,callback:function(t){e.campaignActiveName=t},expression:"campaignActiveName"}},[a("el-tab-pane",{attrs:{label:"新建推广计划",name:"newCampaign"}},[a("el-form",{ref:"campaignForm",attrs:{model:e.form}},[a("div",{staticClass:"temp-item-block items-list-wrap"},[a("div",{staticClass:"items-title"},[e._v("推广目标")]),e._v(" "),a("el-radio-group",{staticClass:"temp-radio-group",model:{value:e.product_type,callback:function(t){e.product_type=t},expression:"product_type"}},e._l(e.productTypeList,function(t,i){return a("div",{key:i,staticClass:"temp-radio-item"},[a("el-radio",{attrs:{label:i},on:{change:function(a){e.productTypeChange(t.campaign_type)}}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticClass:"temp-radio-remark"},[e._v(e._s(t.desc))])],1)})),e._v(" "),a("div",{staticClass:"items-title"},[e._v("计划设置")]),e._v(" "),a("div",{staticClass:"temp-item-block"},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("计划类型：")]),e._v(" "),a("el-radio-group",{staticClass:"radio-inlineblock",model:{value:e.form.campaign_type,callback:function(t){e.$set(e.form,"campaign_type",t)},expression:"form.campaign_type"}},e._l(e.campaignTypeList,function(t,i,s){return a("el-radio",{key:i,attrs:{label:i},on:{change:function(t){e.campaignTypeChange(i)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"CAMPAIGN_TYPE_WECHAT_MOMENTS"!=e.form.campaign_type,expression:'form.campaign_type!="CAMPAIGN_TYPE_WECHAT_MOMENTS"'}],staticClass:"temp-item-block"},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("日限额：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.daily_budget,expression:"form.daily_budget"}],staticClass:"temp-item-inputtext",attrs:{type:"text",value:""},domProps:{value:e.form.daily_budget},on:{input:function(t){t.target.composing||e.$set(e.form,"daily_budget",t.target.value)}}}),e._v(" "),a("span",{staticClass:"temp-item-remark"},[e._v("元/天")])])]),e._v(" "),a("div",{staticClass:"temp-item-block"},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("投放速度：")]),e._v(" "),a("el-radio-group",{staticClass:"radio-inlineblock",model:{value:e.form.speed_mode,callback:function(t){e.$set(e.form,"speed_mode",t)},expression:"form.speed_mode"}},e._l(e.speedModeList,function(t,i,s){return a("el-radio",{key:i,attrs:{label:i}},[e._v(e._s(t))])}))],1),e._v(" "),a("div",{staticClass:"temp-item-block"},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("计划名称：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.campaign_name,expression:"form.campaign_name"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:"",maxlength:"40"},domProps:{value:e.form.campaign_name},on:{input:[function(t){t.target.composing||e.$set(e.form,"campaign_name",t.target.value)},e.campaignNameChange]}}),e._v(" "),a("span",{staticClass:"temp-item-inlayremark"},[e._v(e._s(e.campaign_name_size)+"/40")])])])],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"选择已有计划",name:"chooseCampaign"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.campaignLoading,expression:"campaignLoading"}],staticClass:"adCampaignsList",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.adCampaignsChange},model:{value:e.form.campaign_id,callback:function(t){e.$set(e.form,"campaign_id",t)},expression:"form.campaign_id"}},e._l(e.adCampaignsList,function(e){return a("el-option",{key:e.campaign_id,attrs:{label:e.campaign_name,value:e.campaign_id}})}))],1)],1),e._v(" "),1==e.step?a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.stepNext_1}},[e._v("下一步")])],1):e._e(),e._v(" "),a("el-popover",{ref:"popover2",attrs:{placement:"right-start",title:"",width:"200",trigger:"hover",content:"广告组"}}),e._v(" "),2==e.step||3==e.step?a("div",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"template-item-title"},[e._v("广告组")]):e._e(),e._v(" "),2==e.step||3==e.step?a("el-tabs",{on:{"tab-click":e.handleAdGroupClick},model:{value:e.adGroupActiveName,callback:function(t){e.adGroupActiveName=t},expression:"adGroupActiveName"}},[a("el-tab-pane",{attrs:{label:"新建广告组",name:"newAdGroup"}},[a("el-form",{ref:"adGroupForm",attrs:{model:e.form,inline:!0}},[a("div",{staticClass:"temp-item-block items-list-wrap"},[e.productShow?a("div",{staticClass:"items-title"},[e._v("目标详情")]):e._e(),e._v(" "),e.productShow?a("el-form-item",{attrs:{label:"标的物"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择标的物"},on:{change:e.productChange},model:{value:e.form.product_refs_id,callback:function(t){e.$set(e.form,"product_refs_id",t)},expression:"form.product_refs_id"}},e._l(e.productList,function(e){return a("el-option",{key:e.product_refs_id,attrs:{label:e.product_name,value:e.product_refs_id}})}))],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.subProductShow,expression:"subProductShow"}],attrs:{label:"渠道包"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.subProductLoading,expression:"subProductLoading"}],attrs:{filterable:"",placeholder:"选择渠道包"},model:{value:e.form.sub_product_refs_id,callback:function(t){e.$set(e.form,"sub_product_refs_id",t)},expression:"form.sub_product_refs_id"}},e._l(e.subProductList,function(e){return a("el-option",{key:e.sub_product_refs_id,attrs:{label:e.package_name,value:e.sub_product_refs_id}})}))],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"CAMPAIGN_TYPE_WECHAT_MOMENTS"==e.form.campaign_type,expression:'form.campaign_type=="CAMPAIGN_TYPE_WECHAT_MOMENTS"'}]},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("日限额：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.daily_budget,expression:"form.daily_budget"}],staticClass:"temp-item-inputtext",attrs:{type:"text",value:""},domProps:{value:e.form.daily_budget},on:{input:function(t){t.target.composing||e.$set(e.form,"daily_budget",t.target.value)}}}),e._v(" "),a("span",{staticClass:"temp-item-remark"},[e._v("元/天")])])]),e._v(" "),a("div",{staticClass:"items-title"},[e._v("站点")]),e._v(" "),a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("投放媒体")]),e._v(" "),a("div",{staticClass:"radio-group-inlineblock"},[a("el-radio-group",{model:{value:e.form.site_set,callback:function(t){e.$set(e.form,"site_set",t)},expression:"form.site_set"}},e._l(e.siteSetList,function(t,i){return a("el-radio",{key:i,staticClass:"radio-group-item",attrs:{label:i},on:{change:e.siteSetChange}},[e._v(e._s(t))])}))],1),e._v(" "),a("div",{staticClass:"items-title"},[e._v("定向")]),e._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",remote:"",placeholder:"定向ID","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.changeTargetId},model:{value:e.targetId,callback:function(t){e.targetId=t},expression:"targetId"}},e._l(e.targetList,function(e){return a("el-option",{key:e.targeting_id,attrs:{label:e.targeting_name,value:e.targeting_id}})})),e._v(" "),a("el-button",{attrs:{type:"primary",model:e.target},on:{click:e.editTarget}},[e._v("编辑")]),e._v(" "),e.account_id?a("v-target",{attrs:{target:e.target,readonly:!0}}):e._e(),e._v(" "),a("div",{staticClass:"temp-item-margintop"},[a("div",{staticClass:"items-title"},[e._v("排期与出价")]),e._v(" "),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-date-picker",{attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},on:{change:e.pickerDateChange},model:{value:e.pickerDate,callback:function(t){e.pickerDate=t},expression:"pickerDate"}})],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"投放时段"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.dateRangeChange},model:{value:e.form.time_range,callback:function(t){e.$set(e.form,"time_range",t)},expression:"form.time_range"}},[a("el-radio",{attrs:{label:"0"}},[e._v("全天")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("自定义")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.timeShow,expression:"timeShow"}]},[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"01:00",end:"24:00",maxTime:e.form.end_time}},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}}),e._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"01:00",end:"24:00",minTime:e.form.start_time}},model:{value:e.form.end_time,callback:function(t){e.$set(e.form,"end_time",t)},expression:"form.end_time"}}),e._v(" "),a("a",{attrs:{href:"javascript:;",onclick:"return false"}},[e._v("高级模式")])],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"出价方式"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.billingEventChange},model:{value:e.form.billing_event,callback:function(t){e.$set(e.form,"billing_event",t)},expression:"form.billing_event"}},[a("el-radio",{attrs:{label:"BILLINGEVENT_CLICK",border:""}},[e._v("CPC")]),e._v(" "),a("el-radio",{attrs:{label:"BILLINGEVENT_IMPRESSION",border:""}},[e._v("CPM")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.ocpaMessage,placement:"top-start"}},[a("el-radio",{attrs:{label:"BILLINGEVENT_OCPA",border:"",disabled:e.disabledOcpa}},[e._v("oCPA")])],1)],1)],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"优化目标"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择优化目标"},model:{value:e.form.optimization_goal,callback:function(t){e.$set(e.form,"optimization_goal",t)},expression:"form.optimization_goal"}},e._l(e.optimizationGoalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})}))],1)],1),e._v(" "),a("div",[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("出价：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.bid_amount,expression:"form.bid_amount"}],staticClass:"temp-item-inputtext",attrs:{type:"text",value:""},domProps:{value:e.form.bid_amount},on:{input:function(t){t.target.composing||e.$set(e.form,"bid_amount",t.target.value)}}}),e._v(" "),a("span",{staticClass:"temp-item-remark"},[e._v("元/"+e._s(e.amountName))]),e._v(" "),a("p",{staticClass:"temp-item-annotation",staticStyle:{"margin-left":"20px"}},[e._v("建议出价\n                "),a("span",[e._v(e._s(e.amountRange))]),e._v("元/"+e._s(e.amountName))])])]),e._v(" "),a("div",[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("广告组名称：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.adgroup_name,expression:"form.adgroup_name"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:"",maxlength:"40"},domProps:{value:e.form.adgroup_name},on:{input:[function(t){t.target.composing||e.$set(e.form,"adgroup_name",t.target.value)},e.adgroupNameChange]}}),e._v(" "),a("span",{staticClass:"temp-item-inlayremark"},[e._v(e._s(e.adgroup_name_size)+"/40")])])])],1)],1)],1),e._v(" "),"chooseCampaign"==e.campaignActiveName?a("el-tab-pane",{attrs:{label:"选择已有广告组",name:"chooseAdGroup"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.adGroupLoading,expression:"adGroupLoading"}],staticClass:"adCampaignsList",attrs:{filterable:"",placeholder:"请选择"},on:{change:e.adgroupChange},model:{value:e.form.adgroup_id,callback:function(t){e.$set(e.form,"adgroup_id",t)},expression:"form.adgroup_id"}},e._l(e.adgroupsList,function(e,t){return a("el-option",{key:e.adgroup_id,attrs:{label:e.adgroup_name,value:e.adgroup_id}})}))],1):e._e()],1):e._e(),e._v(" "),2==e.step?a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.stepNext_2}},[e._v("下一步")])],1):e._e(),e._v(" "),a("el-popover",{ref:"popover3",attrs:{placement:"right-start",title:"",width:"200",trigger:"hover",content:"创意"}}),e._v(" "),3==e.step?a("div",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"template-item-title"},[e._v("创意")]):e._e(),e._v(" "),3==e.step?a("div",{staticClass:"temp-item-margintop"},[a("el-form",{ref:"adCreativeForm",attrs:{model:e.form}},[e.destinationUrlShow?a("div",{staticClass:"temp-item-block"},[a("div",{staticClass:"temp-item-title"},[e._v("落地页")]),e._v(" "),a("div",{staticClass:"temp-item-main"},[a("el-form-item",{attrs:{label:"落地页url"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.destination_url,expression:"form.destination_url"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:"",maxlength:"1023"},domProps:{value:e.form.destination_url},on:{input:function(t){t.target.composing||e.$set(e.form,"destination_url",t.target.value)}}})])],1)]):e._e(),e._v(" "),a("div",{staticClass:"temp-item-block"},[a("div",{staticClass:"temp-item-title"},[e._v("创意规格")]),e._v(" "),a("div",{staticClass:"temp-item-main",staticStyle:{display:"inline-flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.adCreativeTableLoading,expression:"adCreativeTableLoading"}],ref:"adCreativeTable",staticStyle:{width:"100%"},attrs:{data:e.adcreativeList,"max-height":"556","highlight-current-row":"","default-sort":{prop:"date",order:"descending"}},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{fixed:"",prop:"adcreative_template_id",label:"ID",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"adcreative_template_name",label:"广告版位"}}),e._v(" "),a("el-table-column",{attrs:{"filter-placement":"bottom-start","filter-method":e.filterHandler,filters:e.element_type_filter,prop:"adcreative_template_style",label:"创意形式",formatter:e.formatterCrtstyle}}),e._v(" "),a("el-table-column",{attrs:{prop:"adcreative_template_desc",label:"创意规格描述"}})],1),e._v(" "),e.adcreativeTemplateInfo_row.adcreative_sample_image.image?a("div",{staticStyle:{float:"right",width:"200px"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.adcreativeTemplateInfo_row.adcreative_sample_image.image}}),e._v(" "),a("div",{staticClass:"sample_image_info"},[a("p",[e._v(e._s(e.adcreativeTemplateInfo_row.adcreative_sample_image.name)+" "),a("br"),e._v(" "),a("span",[e._v("(广告可能出现在以上位置)")])]),e._v(" "),a("span",[e._v(e._s(e.adcreativeTemplateInfo_row.adcreative_template_size))])])]):e._e()],1)]),e._v(" "),a("div",{staticClass:"temp-item-block"},[a("div",{staticClass:"temp-item-title"},[e._v("上传创意")]),e._v(" "),a("div",{staticClass:"temp-item-main"},[a("el-tabs",{on:{"tab-click":e.handleTbaClick},model:{value:e.tabActiveName,callback:function(t){e.tabActiveName=t},expression:"tabActiveName"}},e._l(e.tabList,function(t,i){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}},[a("div",{staticClass:"temp-item-block"},[a("label",{staticClass:"temp-item-label",attrs:{for:""}},[e._v("广告名称：")]),e._v(" "),a("div",{staticClass:"temp-item-inlineblock"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ad_name,expression:"tabItem.ad_name"}],staticClass:"temp-long-inputtext",attrs:{type:"text",value:"",maxlength:"40"},domProps:{value:t.ad_name},on:{input:[function(a){a.target.composing||e.$set(t,"ad_name",a.target.value)},function(a){e.adNameChange(a,t)}]}}),e._v(" "),a("span",{staticClass:"temp-item-inlayremark"},[e._v(e._s(t.ad_name_size)+"/40")])])]),e._v(" "),a("div",{staticClass:"uploadurl-input"},[a("el-input",{attrs:{placeholder:"请输入创意名称",name:"adcreative_name",clearable:""},model:{value:t.adcreative_name,callback:function(a){e.$set(t,"adcreative_name",a)},expression:"tabItem.adcreative_name"}})],1),e._v(" "),e._l(t.elementsData.structList,function(s,r){return t.elementsData.structList.length>0?a("div",{key:s.parent.name+r,staticClass:"uploadList-wrap"},e._l(s.children,function(t,s){return a("div",e._l(t,function(t,n){return a("div",["ELEMENT_TYPE_VIDEO"==t.element_type?a("div",{staticClass:"uploadList-li"},[a("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,r,i,"video",n,s)}}}),e._v(" "),a("div",{staticClass:"uploadfile-item"},[a("div",[a("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                            将视频文件拖到此处，或\n                            "),a("em",[e._v("点击上传")]),e._v(" "),a("br"),e._v(" "),a("p",{staticClass:"upload-size"},[e._v("\n                              "+e._s(t.restriction.video_restriction.min_width||t.restriction.video_restriction.width)+"px * "+e._s(t.restriction.video_restriction.min_height||t.restriction.video_restriction.height)+"px "),a("br"),e._v(" "),a("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.video_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.video_restriction.file_size)+"kb")])]),e._v(" "),a("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1):e._e(),e._v(" "),"ELEMENT_TYPE_IMAGE"==t.element_type?a("div",{staticClass:"uploadList-li"},[a("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,r,i,"image",n,s)}}}),e._v(" "),a("div",{staticClass:"uploadfile-item"},[a("img",{staticClass:"uploadfile-preview",attrs:{src:t.preview_url}}),e._v(" "),t.preview_url?e._e():a("div",[a("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                            将图片文件拖到此处，或\n                            "),a("em",[e._v("点击上传")]),e._v(" "),a("br"),e._v(" "),a("p",{staticClass:"upload-size"},[e._v("\n                              "+e._s(t.restriction.image_restriction.width)+"px * "+e._s(t.restriction.image_restriction.height)+"px "),a("br"),e._v(" "),a("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.image_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.image_restriction.file_size)+"kb")])]),e._v(" "),a("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1):e._e(),e._v(" "),"ELEMENT_TYPE_ENUM"==t.element_type?a("div",{staticClass:"uploadurl-input"},[a("el-select",{attrs:{placeholder:t.description},model:{value:t.itemvalue,callback:function(a){e.$set(t,"itemvalue",a)},expression:"children.itemvalue"}},e._l(t.enum_property.enumeration,function(e,t){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.description}})}))],1):e._e(),e._v(" "),"ELEMENT_TYPE_TEXT"==t.element_type&&t.restriction.text_restriction?a("div",{staticClass:"uploadurl-input"},[a("el-input",{attrs:{minlength:t.restriction.text_restriction.min_length,maxlength:t.restriction.text_restriction.max_length,placeholder:t.description,name:t.name,clearable:""},model:{value:t.itemvalue,callback:function(a){e.$set(t,"itemvalue",a)},expression:"children.itemvalue"}})],1):"ELEMENT_TYPE_TEXT"!=t.element_type||t.restriction.text_restriction?e._e():a("div",{staticClass:"uploadurl-input"},[a("el-input",{attrs:{placeholder:t.description,name:t.name,clearable:""},model:{value:t.itemvalue,callback:function(a){e.$set(t,"itemvalue",a)},expression:"children.itemvalue"}})],1),e._v(" "),"ELEMENT_TYPE_URL"==t.element_type?a("div",{staticClass:"uploadurl-input"},[a("el-input",{attrs:{placeholder:t.description,name:t.name,clearable:""},model:{value:t.itemvalue,callback:function(a){e.$set(t,"itemvalue",a)},expression:"children.itemvalue"}})],1):e._e()])}))})):e._e()}),e._v(" "),t.elementsData.videoList.length>0?a("div",{staticClass:"uploadList-wrap"},e._l(t.elementsData.videoList,function(t,s){return a("div",{key:t.name+s,staticClass:"uploadList-li"},[a("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,s,i,"video")}}}),e._v(" "),a("div",{staticClass:"uploadfile-item"},[a("div",[a("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                        将视频文件拖到此处，或\n                        "),a("em",[e._v("点击上传")]),e._v(" "),a("br"),e._v(" "),a("p",{staticClass:"upload-size"},[e._v("\n                          "+e._s(t.restriction.video_restriction.min_width||t.restriction.video_restriction.width)+"px * "+e._s(t.restriction.video_restriction.min_height||t.restriction.video_restriction.height)+"px "),a("br"),e._v(" "),a("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.video_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.video_restriction.file_size)+"kb")])]),e._v(" "),a("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1)})):e._e(),e._v(" "),t.elementsData.imageList.length>0?a("div",{staticClass:"uploadList-wrap"},e._l(t.elementsData.imageList,function(t,s){return a("div",{key:t.name+s,staticClass:"uploadList-li"},[a("input",{staticClass:"uploadfile-input",attrs:{type:"file"},on:{change:function(t){e.uploadfileChange(t,s,i,"image")}}}),e._v(" "),a("div",{staticClass:"uploadfile-item"},[a("img",{staticClass:"uploadfile-preview",attrs:{src:t.preview_url}}),e._v(" "),t.preview_url?e._e():a("div",[a("i",{staticClass:"el-icon-upload icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                        将图片文件拖到此处，或\n                        "),a("em",[e._v("点击上传")]),e._v(" "),a("br"),e._v(" "),a("p",{staticClass:"upload-size"},[e._v("\n                          "+e._s(t.restriction.image_restriction.width)+"px * "+e._s(t.restriction.image_restriction.height)+"px "),a("br"),e._v(" "),a("span",[e._v("（推荐尺寸）")])])])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(t.restriction.image_restriction.file_format_text)+"文件，且不超过"+e._s(t.restriction.image_restriction.file_size)+"kb")])]),e._v(" "),a("el-progress",{attrs:{percentage:t.progressbar.percentage,status:t.progressbar.status}})],1)})):e._e(),e._v(" "),e._l(t.elementsData.enumList,function(i,s){return t.elementsData.enumList.length>0?a("div",{key:i.name+s,staticClass:"uploadurl-input"},[a("el-select",{attrs:{placeholder:i.description},model:{value:i.itemvalue,callback:function(t){e.$set(i,"itemvalue",t)},expression:"uploadItem.itemvalue"}},e._l(i.enum_property.enumeration,function(e,t){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.description}})}))],1):e._e()}),e._v(" "),e._l(t.elementsData.textList,function(i,s){return t.elementsData.textList.length>0?a("div",{key:i.name+s,staticClass:"uploadurl-input"},["ELEMENT_TYPE_TEXT"==i.element_type&&i.restriction.text_restriction?a("div",[a("el-input",{attrs:{minlength:i.restriction.text_restriction.min_length,maxlength:i.restriction.text_restriction.max_length,placeholder:i.description,name:i.name,clearable:""},model:{value:i.itemvalue,callback:function(t){e.$set(i,"itemvalue",t)},expression:"uploadItem.itemvalue"}})],1):"ELEMENT_TYPE_TEXT"!=i.element_type||i.restriction.text_restriction?e._e():a("div",[a("el-input",{attrs:{placeholder:i.description,name:i.name,clearable:""},model:{value:i.itemvalue,callback:function(t){e.$set(i,"itemvalue",t)},expression:"uploadItem.itemvalue"}})],1)]):e._e()}),e._v(" "),e._l(t.elementsData.urlList,function(i,s){return t.elementsData.urlList.length>0?a("div",{key:i.name+s,staticClass:"uploadurl-input"},[a("el-input",{attrs:{placeholder:i.description,name:i.name,clearable:""},model:{value:i.itemvalue,callback:function(t){e.$set(i,"itemvalue",t)},expression:"uploadItem.itemvalue"}})],1):e._e()})],2)}))],1)])])],1):e._e(),e._v(" "),3==e.step?a("div",[a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.onSubmit}},[e._v("提交")])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"50%",modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("v-target",{attrs:{target:e.target,locked:!0},on:{change:e.changeTarget}})],1),e._v(" "),a("el-dialog",{attrs:{title:"取消定向包",visible:e.dialogConfirmVisible,width:"30%","before-close":e.handleConfirmClose},on:{"update:visible":function(t){e.dialogConfirmVisible=t}}},[a("span",[e._v("取消使用定向包 "+e._s(e.target.targeting_name)+" ，仅复制该定向包的内容进行编辑")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogConfirmVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogConfirmVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"estimation"},[a("div",{staticClass:"datas"},[a("div",{staticClass:"data-des"},[a("h3",[e._v("预计最大覆盖用户")]),e._v(" "),a("p",[a("span",{staticClass:"num"},[e._v(e._s(e.approximate_count))]),e._v(" 人")])]),e._v(" "),a("div",{staticClass:"data-des"},[a("h3",[e._v("预计最大日曝光量")]),e._v(" "),a("p",[a("span",{staticClass:"num"},[e._v(e._s(e.impression))]),e._v(" 次")])])])])],1)},staticRenderFns:[]};var d=a("VU/8")(c,m,!1,function(e){a("LSnE")},"data-v-46d55658",null);t.default=d.exports}});
//# sourceMappingURL=22.235df65d04a0df1579b9.js.map
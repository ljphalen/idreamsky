webpackJsonp([15],{"8Gr0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={created:function(){this.getEnumList()},watch:{account_id:function(){}},computed:{account_id:function(){return this.$store.getters.get_account_action.account_id}},mounted:function(){this.loadAll()},data:function(){return{apps:[],appList:[],productNameShow:!0,loading:!1,form:{product_type:"",product_name:"",product_refs_id:""},PRODUCT_REFS_TYPE_list:{}}},methods:{onCancel:function(){this.$router.push("/setting/product")},onSubmit:function(){var t=this.form,e=this;e.loading=!0,t.account_id=this.account_id,this.$axios.get("/Admin/Marketing_Products/add",{params:t}).then(function(t){e.loading=!1;var i=t.data;0==i.code?(e.$message({type:"success",message:i.msg}),setTimeout(function(){e.$router.push("/setting/product")},500)):e.$message.error(i.msg)}).catch(function(t){e.$message("网络繁忙，请稍后再试！"),console.log(t)})},getEnumList:function(){var t=this;this.$axios.get("/Admin/Marketing_Common/getEnum",{}).then(function(e){var i=e.data;0==i.code&&(t.PRODUCT_REFS_TYPE_list=i.data.PRODUCT_REFS_TYPE,console.log(t.PRODUCT_REFS_TYPE_list))}).catch(function(t){console.log(t)})},productTypeChange:function(t){"PRODUCT_TYPE_APP_ANDROID_OPEN_PLATFORM"==t||"PRODUCT_TYPE_APP_IOS"==t?(this.productNameShow=!1,this.apps="PRODUCT_TYPE_APP_IOS"==t?this.appList.filter(this.createFilterPlatform("ios")):this.appList.filter(this.createFilterPlatform("android"))):(this.productNameShow=!0,this.apps=[])},querySearch:function(t,e){var i=this.apps;e(t?i.filter(this.createFilter(t)):i)},createFilter:function(t){return function(e){return 0===e.appstore_id.toLowerCase().indexOf(t.toLowerCase())}},createFilterPlatform:function(t){return function(e){return e.platform==t}},loadAll:function(){var t=this;this.$axios.get("/Admin/Marketing_Products/getApp",{}).then(function(e){var i=e.data;0==i.code&&(t.appList=i.data)}).catch(function(t){console.log(t)})},handleSelect:function(t){this.form.product_refs_id=t.appstore_id},handleIconClick:function(t){console.log(t)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"template-container"},[i("div",{staticClass:"template-container-title"},[t._v("新增标的物")]),t._v(" "),i("el-form",{ref:"form",attrs:{model:t.form}},[i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[t._v("标的物类型")]),t._v(" "),i("div",{staticClass:"temp-item-main"},[i("el-radio-group",{staticClass:"temp-radio-group",on:{change:t.productTypeChange},model:{value:t.form.product_type,callback:function(e){t.$set(t.form,"product_type",e)},expression:"form.product_type"}},t._l(t.PRODUCT_REFS_TYPE_list,function(e,a){return i("div",{staticClass:"temp-radio-item"},[i("el-radio",{attrs:{label:a}},[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"temp-radio-remark"},[t._v(t._s(e.desc))])],1)}))],1)]),t._v(" "),i("div",{staticClass:"temp-item-block"},[i("div",{staticClass:"temp-item-title"},[t._v("标的物设置")]),t._v(" "),i("div",{staticClass:"temp-item-main"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.productNameShow,expression:"productNameShow"}],staticClass:"temp-item-block"},[i("label",{staticClass:"temp-item-label",attrs:{for:""}},[t._v("标的物名称：")]),t._v(" "),i("div",{staticClass:"temp-item-inlineblock"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.product_name,expression:"form.product_name"}],staticClass:"temp-item-inputtext",attrs:{type:"text",value:""},domProps:{value:t.form.product_name},on:{input:function(e){e.target.composing||t.$set(t.form,"product_name",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"temp-item-block"},[i("label",{staticClass:"temp-item-label",staticStyle:{"padding-top":"7px"},attrs:{for:""}},[t._v("标的物id：")]),t._v(" "),i("div",{staticClass:"temp-item-inlineblock"},[i("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":t.querySearch,placeholder:"请输入标的物id"},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"name"},[t._v(t._s(e.item.app_name))])]}}]),model:{value:t.form.product_refs_id,callback:function(e){t.$set(t.form,"product_refs_id",e)},expression:"form.product_refs_id"}},[i("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},on:{click:t.handleIconClick},slot:"suffix"})])],1)])])]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),i("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=i("VU/8")(a,o,!1,function(t){i("Sfqk")},"data-v-6fb7e0ba",null);e.default=s.exports},Sfqk:function(t,e){}});
//# sourceMappingURL=15.2989a6d75546ea7ed029.js.map